var P=Object.defineProperty,F=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var k=(a,r,t)=>r in a?P(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,f=(a,r)=>{for(var t in r||(r={}))j.call(r,t)&&k(a,t,r[t]);if(h)for(var t of h(r))C.call(r,t)&&k(a,t,r[t]);return a},E=(a,r)=>F(a,D(r));var T=(a,r)=>{var t={};for(var o in a)j.call(a,o)&&r.indexOf(o)<0&&(t[o]=a[o]);if(a!=null&&h)for(var o of h(a))r.indexOf(o)<0&&C.call(a,o)&&(t[o]=a[o]);return t};import{r as H,R as e}from"./vendor.99726a2e.js";import{F as O,a as R,b as g}from"./formik.78ddb322.js";import{T as B}from"./react-textarea-autosize.e05a62bc.js";import{a2 as L,P as _,C as z,h as N,H as q,a3 as s,a4 as S,a5 as M,X as V,T as G,B as K}from"./PublicLayout.30f21c4b.js";import{C as U}from"./Card.e07ae1d5.js";import{A as W,D as Y,E as I,ad as Q,z as X,y as Z,u as w,d as J,a6 as $,C as ee,aZ as ae,ah as te,a3 as re,H as oe}from"./index.c1fe9b16.js";import{T as ne}from"./types.401d8b7f.js";import{H as se}from"./contants.d6573c4d.js";import{u as le}from"./use-toast.e2b20c33.js";import"./prop-types.d6ec705b.js";import"./react-redux.9e699590.js";import"./axios.7b768d2b.js";import"./focus-visible.88d37904.js";function b(){return b=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=t[o])}return a},b.apply(this,arguments)}function ce(a,r){if(a==null)return{};var t={},o=Object.keys(a),c,m;for(m=0;m<o.length;m++)c=o[m],!(r.indexOf(c)>=0)&&(t[c]=a[c]);return t}var me=W((a,r)=>{var t=Y("Textarea",a),o=I(a),{className:c,rows:m}=o,n=ce(o,["className","rows"]),d=L(n),l=["h","minH","height","minHeight"],i=m?Q(t,l):t;return H.exports.createElement(X.textarea,b({ref:r,rows:m},d,{className:Z("chakra-textarea",c),__css:i}))});const ke=()=>{const a=Object.values(ne),{addingDealerCar:r}=w(n=>n.carsReducer),{catalogQuery:t}=w(n=>n.globalAppState),o=J(),c=le(),m={manufacturer:"",modelGroup:"",modelDetail:"",bodyStyle:"",damage:"",location:"",odometer:0,cylinders:0,drive:"",engine:0,transmission:"",year:"",keys:"",fuelType:"",color:"",price:0,description:"",photos:null};return e.createElement(_,null,e.createElement(z,{pt:["32px",null,null,"40px"]},e.createElement(N,{onClick:()=>o($())},"logout"),e.createElement(ee,null,e.createElement(U,{w:"500px",bg:"#fff",p:"4"},e.createElement(O,{initialValues:m,onSubmit:(n,{setFieldError:d})=>{const v=n,{photos:l,keys:i}=v,y=T(v,["photos","keys"]),u=new FormData;for(let p in y)u.append(p,n[p]);if(l)for(let p of l)u.append("photo[]",p);i&&u.append("keys",se.YES),console.log(u.get("keys")),console.log(y);const A=new URLSearchParams(t);o(ae(u)).unwrap().then(()=>{o(te(A)),c({title:"New car edded successfully",position:"top",status:"success",duration:1500})}).catch(p=>{let x="";re(p)&&p.status===422&&(x="Fill in required fields",d("manufacturer","required")),c({title:x,position:"top",variant:"solid",status:"error",duration:2e3})})}},({values:n,setFieldValue:d})=>e.createElement(R,null,e.createElement(q,null,"Add Car"),e.createElement(s,{name:"manufacturer",placeholder:"Manufacturer"}),e.createElement(s,{name:"modelGroup",placeholder:"Model group"}),e.createElement(s,{name:"modelDetail",placeholder:"Model detail"}),e.createElement(s,{name:"bodyStyle",placeholder:"Body style"}),e.createElement(s,{name:"damage",placeholder:"damage"}),e.createElement(s,{name:"location",placeholder:"location"}),e.createElement(s,{name:"odometer",placeholder:"odometer",type:"number",value:n.odometer||""}),e.createElement(s,{name:"cylinders",placeholder:"cylinders",type:"number",value:n.cylinders||""}),e.createElement(s,{name:"drive",placeholder:"drive"}),e.createElement(s,{name:"engine",type:"number",value:n.engine||"",placeholder:"Engine capacity"}),e.createElement(g,{name:"transmission"},({field:l})=>e.createElement(S,{pt:"2"},e.createElement(M,E(f({},l),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Transmission"}),a.map(i=>e.createElement("option",{key:i,value:i},i))))),e.createElement(s,{name:"year",placeholder:"Year",type:"number",value:n.year||""}),e.createElement(s,{name:"fuelType",placeholder:"Fuel type"}),e.createElement(s,{name:"color",placeholder:"Color"}),e.createElement(s,{name:"price",placeholder:"Price",type:"number",value:n.price||""}),e.createElement(g,{name:"keys"},({field:l})=>e.createElement(S,{pt:"2"},e.createElement(oe,null,e.createElement(V,f({colorScheme:"autoOrange",name:"kes"},l)),e.createElement(G,null,"Has keys")))),e.createElement(g,{name:"description"},({field:l})=>e.createElement(me,E(f({mt:"2"},l),{placeholder:"Write Description",size:"sm",as:B,maxRows:10}))),e.createElement(g,{name:"photos"},({field:l})=>e.createElement("input",E(f({type:"file"},l),{multiple:!0,value:void 0,onChange:i=>{const y=i.currentTarget.files;d("photos",y)}}))),e.createElement(K,{type:"submit",mt:"4",mb:"4",isLoading:r},"Add")))))))};export{ke as AdminPage,ke as default};
