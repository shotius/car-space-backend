var M=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var C=(a,t,e)=>t in a?M(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,S=(a,t)=>{for(var e in t||(t={}))x.call(t,e)&&C(a,e,t[e]);if(h)for(var e of h(t))A.call(t,e)&&C(a,e,t[e]);return a};var I=(a,t)=>{var e={};for(var o in a)x.call(a,o)&&t.indexOf(o)<0&&(e[o]=a[o]);if(a!=null&&h)for(var o of h(a))t.indexOf(o)<0&&A.call(a,o)&&(e[o]=a[o]);return e};import{Y as w,j as r,K as D,r as L,a as b,b as f,a2 as P,f as H,aB as T,aC as _,aD as v,c as E,e as y,o as F,V as O,T as j,L as z,R as G,I as N,aE as Z,aF as Q,aG as k,aH as U,aI as V,k as W}from"./index.1849e885.js";import{c as Y,T as q}from"./TextSecondary.d5e148f3.js";import{B as K}from"./range.b1e7ba9e.js";const $=w({displayName:"HeartFilled",viewBox:"0 0 16 15",path:r(D,{children:r("path",{id:"Icon_ionic-ios-heart","data-name":"Icon ionic-ios-heart",d:"M15.067,3.938h-.038a4.4,4.4,0,0,0-3.654,1.95,4.4,4.4,0,0,0-3.654-1.95H7.683A4.294,4.294,0,0,0,3.375,8.175a8.984,8.984,0,0,0,1.838,4.976,31.909,31.909,0,0,0,6.162,5.786,31.909,31.909,0,0,0,6.162-5.786,8.984,8.984,0,0,0,1.838-4.976A4.294,4.294,0,0,0,15.067,3.938Z",transform:"translate(-3.375 -3.938)",fill:"#DC1864"})})}),J=w({displayName:"HeartIcon",viewBox:"0 0 16 15",path:r(D,{children:r("path",{id:"Icon_material-favorite-border","data-name":"Icon material-favorite-border",d:"M14.6,4.5A4.75,4.75,0,0,0,11,6.208,4.75,4.75,0,0,0,7.4,4.5,4.406,4.406,0,0,0,3,9c0,3.09,2.72,5.608,6.84,9.433L11,19.5l1.16-1.079C16.28,14.6,19,12.086,19,9A4.406,4.406,0,0,0,14.6,4.5ZM11.08,17.211l-.08.082-.08-.082C7.112,13.688,4.6,11.358,4.6,9A2.764,2.764,0,0,1,7.4,6.135a3.127,3.127,0,0,1,2.856,1.929h1.5A3.108,3.108,0,0,1,14.6,6.135,2.764,2.764,0,0,1,17.4,9C17.4,11.358,14.888,13.688,11.08,17.211Z",transform:"translate(-3 -4.5)"})})}),X=m=>{var c=m,{boxSize:a=6,carId:t,buttonInactiveColor:e="autoGrey.500"}=c,o=I(c,["boxSize","carId","buttonInactiveColor"]);const[p,i]=L.exports.useState(!1),n=b(),{favouriteCarIds:s,likingCar:d,isAuthenticated:l}=f(u=>u.userInfoSlice),{isDesktop:g}=P(),B=H();return L.exports.useEffect(()=>{(s==null?void 0:s.length)&&s.includes(t)?i(!0):i(!1)},[s]),r(K,S({icon:p?$:J,boxSize:a,bg:p?"autoOrange.100":e,onClick:u=>{u.stopPropagation&&u.stopPropagation(),l&&i(!p),l?d||n(T(t)).unwrap().then(()=>i(!0)).catch(R=>{i(!1),B({title:R,position:"top",duration:2e3,status:"error"})}):n(g?_():v())},_hover:{fill:"autoOrange.600",bg:"autoOrange.200"}},o))},sa=({id:a,model:t,year:e})=>{const{role:o}=f(n=>n.userInfoSlice),{catalogQuery:m}=f(n=>n.globalAppState),c=b(),p=E(),i=H();return y(F,{justifyContent:"space-between",w:"full",children:[y(O,{alignItems:"flex-start",spacing:"0",children:[r(j,{fontFamily:"Roboto Medium",fontSize:"18px",maxW:["200px","150px"],noOfLines:1,_hover:{textDecor:"underline"},children:r(z,{to:`/car/${a}`,children:Y(t)})}),r(q,{opacity:"50%",children:e||"Year: -"})]}),(o==null?void 0:o.toLocaleLowerCase())===G.ADMIN.toLocaleLowerCase()?r(N,{icon:r(Z,{}),"aria-label":"delete car",onClick:n=>{n.stopPropagation&&n.stopPropagation(),c(Q(a)).unwrap().then(()=>{const s=new URLSearchParams(m);c(k(s)).unwrap().then(d=>{const l=s.get("page");if(!d.cars.length&&l&&l!=="1"){const g=parseInt(l)-1||"1";s.set("page",g.toString()),c(U(s.toString())),p.push({pathname:V,search:s.toString()}),c(k(s))}}),i({title:"Deleted successfully",position:"top",status:"success",duration:2e3})}).catch(s=>{W(s)&&i({title:s.message,position:"top",status:"error",duration:2e3}),i({title:"Could not delelete the card",position:"top",status:"error",duration:2e3})})}}):r(X,{h:"40px",w:"36px",boxSize:5,carId:a})]})};export{X as B,sa as C};
