var ge=Object.defineProperty,ye=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var te=(t,r,a)=>r in t?ge(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,b=(t,r)=>{for(var a in r||(r={}))Z.call(r,a)&&te(t,a,r[a]);if(D)for(var a of D(r))ee.call(r,a)&&te(t,a,r[a]);return t},x=(t,r)=>ye(t,ve(r));var L=(t,r)=>{var a={};for(var l in t)Z.call(t,l)&&r.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&D)for(var l of D(t))r.indexOf(l)<0&&ee.call(t,l)&&(a[l]=t[l]);return a};import{r as d,R as e,k as be,L as M,S as xe,f as P,e as we}from"./vendor.576a7237.js";import{$ as ae,a8 as Ce,a9 as Se,bx as ke,ax as Oe,by as Ae,a1 as H,X as Re,a0 as je,bz as Ne,a as W,u as O,c as A,j as _,C as V,b8 as Te,bA as Fe,aq as Ie,e as re,H as R,F as u,bB as $,f as z,b1 as De,T as U,h as G,v as Le,l as Pe,ah as We,bC as _e,bD as ze,bE as le,t as Ue,V as F,N as ne,I as oe,ao as se,bF as Be,bG as Me,bH as He,B as j,w as Ve,x as $e,y as Ge,n as qe,z as Ye,q as Ke,aX as Xe,bI as Qe,aY as Je,aV as Ze}from"./index.96394f1d.js";import{S as et,a as tt,C as q}from"./SelectTrigger.a4f448e3.js";import{F as Y,a as K,b as S}from"./formik.30c45d87.js";import{T as ce}from"./react-textarea-autosize.f1892001.js";import{C as I}from"./Card.7789212d.js";import{T as at}from"./types.401d8b7f.js";import{T as ie}from"./textarea.7dcbb224.js";import{c as rt}from"./TextSecondary.4fbe14fb.js";import{S as lt,a as nt,b as ot}from"./SelectWrapper.0aa84a0f.js";import{A as X}from"./aspect-ratio.db608f12.js";import{I as Q}from"./image.ef5e93a8.js";import{d as st,O as ct}from"./OrderListCard.1c63a20e.js";import"./prop-types.d6ec705b.js";import"./react-redux.0b249e8a.js";import"./axios.7b768d2b.js";import"./yup.df40d5b6.js";import"./focus-visible.c4e3ef79.js";import"./NotSpecified.b59d6797.js";function k(){return k=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},k.apply(this,arguments)}function J(t,r){if(t==null)return{};var a={},l=Object.keys(t),c,i;for(i=0;i<l.length;i++)c=l[i],!(r.indexOf(c)>=0)&&(a[c]=t[c]);return a}var it=ae((t,r)=>{var{children:a,placeholder:l,className:c}=t,i=J(t,["children","placeholder","className"]);return d.exports.createElement(H.select,k({},i,{ref:r,className:je("chakra-select",c)}),l&&d.exports.createElement("option",{value:""},l),a)}),me=ae((t,r)=>{var a=Ce("Select",t),l=Se(t),{rootProps:c,placeholder:i,icon:n,color:o,height:s,h:m,minH:p,minHeight:g,iconColor:h,iconSize:E}=l,f=J(l,["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize","isFullWidth"]),[w,y]=ke(f,Ne),C=Oe(y),B={width:"100%",height:"fit-content",position:"relative",color:o},N=Ae({},a.field,{paddingEnd:"2rem",_focus:{zIndex:"unset"}});return d.exports.createElement(H.div,k({className:"chakra-select__wrapper",__css:B},w,c),d.exports.createElement(it,k({ref:r,height:m!=null?m:s,minH:p!=null?p:g,placeholder:i},C,{__css:N}),t.children),d.exports.createElement(pt,k({"data-disabled":Re(C.disabled)},(h||o)&&{color:h||o},{__css:a.icon},E&&{fontSize:E}),n))}),mt=t=>d.exports.createElement("svg",k({viewBox:"0 0 24 24"},t),d.exports.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),dt=H("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),pt=t=>{var{children:r=d.exports.createElement(mt,null)}=t,a=J(t,["children"]),l=d.exports.cloneElement(r,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return d.exports.createElement(dt,k({},a,{className:"chakra-select__icon-wrapper"}),d.exports.isValidElement(r)?l:null)};const ut=()=>{const t=Object.values(at),{addingDealerCar:r}=W(n=>n.carsReducer),{catalogQuery:a}=W(n=>n.globalAppState),l=O(),c=A(),i={manufacturer:"",modelGroup:"",modelDetail:"",bodyStyle:"",damage:"",location:"",odometer:0,cylinders:0,drive:"",engine:0,transmission:"",year:"",keys:"",fuelType:"",color:"",price:0,description:"",photos:null};return e.createElement(_,{pt:["32px",null,null,"40px"]},e.createElement(V,null,e.createElement(I,{w:"500px",bg:"#fff",p:"4"},e.createElement(Y,{initialValues:i,onSubmit:(n,{setFieldError:o})=>{const E=n,{photos:s,keys:m}=E,p=L(E,["photos","keys"]),g=new FormData;for(let f in p)g.append(f,n[f]);if(s)for(let f of s)g.append("photo[]",f);m&&g.append("keys",Te.YES);const h=new URLSearchParams(a);l(Fe(g)).unwrap().then(()=>{l(Ie(h)),c({title:"New car edded successfully",position:"top",status:"success",duration:1500})}).catch(f=>{let w="";re(f)&&f.status===422&&(w="Fill in required fields",o("manufacturer","required")),c({title:w,position:"top",variant:"solid",status:"error",duration:2e3})})}},({values:n,setFieldValue:o})=>e.createElement(K,null,e.createElement(R,null,"Add Car"),e.createElement(u,{name:"manufacturer",placeholder:"Manufacturer"}),e.createElement(u,{name:"modelGroup",placeholder:"Model group"}),e.createElement(u,{name:"modelDetail",placeholder:"Model detail"}),e.createElement(u,{name:"bodyStyle",placeholder:"Body style"}),e.createElement(u,{name:"damage",placeholder:"damage"}),e.createElement(u,{name:"location",placeholder:"location"}),e.createElement(u,{name:"odometer",placeholder:"odometer",type:"number",value:n.odometer||""}),e.createElement(u,{name:"cylinders",placeholder:"cylinders",type:"number",value:n.cylinders||""}),e.createElement(u,{name:"drive",placeholder:"drive"}),e.createElement(u,{name:"engine",type:"number",value:n.engine||"",placeholder:"Engine capacity"}),e.createElement(S,{name:"transmission"},({field:s})=>e.createElement($,{pt:"2"},e.createElement(me,x(b({},s),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Transmission"}),t.map(m=>e.createElement("option",{key:m,value:m},m))))),e.createElement(u,{name:"year",placeholder:"Year",type:"number",value:n.year||""}),e.createElement(u,{name:"fuelType",placeholder:"Fuel type"}),e.createElement(u,{name:"color",placeholder:"Color"}),e.createElement(u,{name:"price",placeholder:"Price",type:"number",value:n.price||""}),e.createElement(S,{name:"keys"},({field:s})=>e.createElement($,{pt:"2"},e.createElement(z,null,e.createElement(De,b({colorScheme:"autoOrange",name:"kes"},s)),e.createElement(U,null,"Has keys")))),e.createElement(S,{name:"description"},({field:s})=>e.createElement(ie,x(b({mt:"2"},s),{placeholder:"Write Description",size:"sm",as:ce,maxRows:10}))),e.createElement(S,{name:"photos"},({field:s})=>e.createElement("input",x(b({type:"file"},s),{multiple:!0,value:void 0,onChange:m=>{const p=m.currentTarget.files;o("photos",p)}}))),e.createElement(G,{type:"submit",mt:"4",mb:"4",isLoading:r},"Add"))))))},de=c=>{var i=c,{onSelect:t,name:r,onUserSelect:a}=i,l=L(i,["onSelect","name","onUserSelect"]);const{isOpen:n,onToggle:o,onOpen:s,onClose:m}=Le(),[p,g]=d.exports.useState(),[h,E]=d.exports.useState(""),[f,w]=d.exports.useState(""),[y,C]=d.exports.useState([]),[B,N]=d.exports.useState(!1),pe=O(),ue=A(),he=()=>{E(p?p.fullName:"Search for user...")},Ee=v=>{N(!0),pe(_e(v)).unwrap().then(T=>{C(T),N(!1)}).catch(()=>{ue({title:"Could not fetch users",position:"top",status:"error",duration:2e3}),N(!1)})},fe=y.filter(v=>v.fullName.toLocaleLowerCase().includes(f.toLocaleLowerCase()));return e.createElement(lt,b({areOptionsOpen:n},l),e.createElement(Pe,{onClick:m,isActive:n}),e.createElement(nt,null,e.createElement(et,{areOptionsOpen:n,areOptionsSelected:!!p,clearCb:()=>{g(void 0)}},e.createElement(tt,{autoComplete:"off",bg:"autoGrey.200",name:r||"",label:"Search for user...",placeholder:h,value:p?rt(p.fullName):f,onChange:v=>{const T=v.currentTarget.value;Ee(T),w(T),g(void 0),T&&s()},onFocus:()=>{he()}})),e.createElement(ot,{isOpen:n},B?e.createElement(R,{textAlign:"center",w:"full"},"Fetching ..."," "):fe.map(v=>e.createElement(We,{h:"80px",onClick:()=>{E(v.fullName),o(),t(v.id),a&&a(v),g(v)},key:v.id},e.createElement(z,{w:"full"},e.createElement(X,{ratio:1/1,w:"50px"},e.createElement(Q,{w:"full",h:"full",src:v.avatar,fallbackSrc:"https://image.shutterstock.com/image-vector/profile-picture-avatar-icon-vector-260nw-1760295569.jpg",borderRadius:"100px"})),e.createElement(R,null,v.fullName)))))))},ht=({})=>{const t=O(),r=A(),{addingReview:a}=W(n=>n.customers),l={text:"",userId:"",photos:null},c=n=>{let o="";return n?n.length!==24&&(o="Invalid length"):o="Required",o},i=n=>{let o="";return n&&n.length>4&&(o="Photos must be less then 4"),o};return e.createElement(Y,{initialValues:l,onSubmit:(n,{setErrors:o})=>{const g=n,{photos:s}=g,m=L(g,["photos"]),p=new FormData;if(s)for(let h of s)p.append("photo[]",h);for(let[h,E]of Object.entries(m))p.append(h,E);t(ze(p)).unwrap().then(()=>{t(le("")),r({title:"New Review added",duration:2e3,status:"success",position:"top"})}).catch(h=>{var E;re(h)&&h.status===422&&((E=h.errors)==null?void 0:E.length)&&o(Ue(h.errors))})}},({setFieldValue:n})=>e.createElement(K,null,e.createElement(R,{pb:"4"},"Add new Review"),e.createElement(S,{name:"userId",validate:c},({field:o,form:s})=>e.createElement(e.Fragment,null,e.createElement(de,x(b({},o),{name:"userId",onItemSelect:m=>{n("userId",m)}})),e.createElement(U,{as:"span",color:"red"},s.errors.userId))),e.createElement(S,{name:"text"},({field:o})=>e.createElement(ie,x(b({mt:"2"},o),{placeholder:"Write Description",size:"sm",as:ce,maxRows:10}))),e.createElement(S,{name:"photos",validate:i},({field:o,form:s})=>e.createElement(e.Fragment,null,e.createElement("input",x(b({},o),{type:"file",multiple:!0,value:void 0,onChange:m=>{n("photos",m.currentTarget.files)}})),e.createElement(U,{as:"span",display:"block",color:"red"},s.errors.photos))),e.createElement(G,{type:"submit",mt:"4",isLoading:a},"Add Review")))},Et=({})=>{const{reviews:t,removingReview:r,fetchingReviews:a}=W(i=>i.customers),l=O(),c=A();return d.exports.useEffect(()=>{l(le(""))},[]),e.createElement(_,{pt:["32px",null,null,"40px"]},e.createElement(V,null,e.createElement(F,{spacing:"32px"},e.createElement(I,{maxW:"500px",p:"4"},e.createElement(ht,null)),e.createElement(I,{w:"full",maxW:"500px"},e.createElement(F,{w:"full"},a?e.createElement(e.Fragment,null,"Getting Reviews...",e.createElement(ne,null)):t.length?t.map((i,n)=>e.createElement(z,{key:n,bg:"autoGrey.200",w:"full",p:"4",borderRadius:"8",opacity:r?"0.5":"1"},e.createElement(oe,{icon:e.createElement(se,null),"aria-label":"remove review",isLoading:r,onClick:()=>{l(Be(i.id)).then(()=>c({title:"Review Deleted",status:"success",duration:2e3,position:"top"})).catch(()=>c({title:"Could not delete the review, contact to the developer",status:"error",duration:2e3,position:"top"}))}}),e.createElement(X,{ratio:1/1,minW:"80px"},e.createElement(Q,{src:i.user&&i.user.avatar,fallbackSrc:"https://image.shutterstock.com/image-vector/profile-picture-avatar-icon-vector-260nw-1760295569.jpg",borderRadius:"100px"})),e.createElement(U,{overflowWrap:"anywhere"},i.text),i.photos&&i.photos.map(o=>e.createElement(X,{key:o,ratio:1/1,minW:"60px"},e.createElement(Q,{src:o}))))):e.createElement(e.Fragment,null,"No Review Yet"))))))},ft=({operation:t,userId:r,car:a,closeDrawer:l})=>{const c=O(),i=A();let n;return a&&t==="modifying"?n={carName:a.carName,deliveryAt:a.deliveryAt?st(a.deliveryAt.toString(),"-"):new Date,location:a.location,price:a.price,status:a.status}:n={carName:"",deliveryAt:new Date,location:"",price:0,status:""},e.createElement(Y,{initialValues:n,onSubmit:(o,{setSubmitting:s})=>{t==="modifying"&&a?c(Me({carId:a.id,props:x(b({},o),{userId:r})})).unwrap().then(()=>{s(!1),l()}).catch(m=>{s(!1),i({title:m,status:"error",position:"top"}),l()}):c(He(x(b({},o),{userId:r}))).unwrap().then(()=>{s(!1),l()}).catch(m=>{i({title:m,status:"error",position:"top"}),s(!1),l()})}},({isSubmitting:o})=>e.createElement(K,null,e.createElement(u,{name:"carName",placeholder:"car name"}),e.createElement(u,{name:"location",placeholder:"Location"}),e.createElement(u,{name:"price",placeholder:"Price",type:"number"}),e.createElement(S,{name:"status"},({field:s})=>e.createElement($,{pt:"2"},e.createElement(me,x(b({},s),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Status"}),e.createElement("option",{value:"Completed"},"Completed"),e.createElement("option",{value:"On The Way"},"On the way")))),e.createElement(u,{name:"deliveryAt",bg:"#EAEAEB",opacity:"0.5",placeholder:"Status",type:"date",label:"Delivery at:  dd/mm/yyyy"}),e.createElement(G,{mt:"4",type:"submit",isLoading:o},t==="modifying"?"Update car":"Add Car")))},gt=({})=>{const[t,r]=d.exports.useState([]),[a,l]=d.exports.useState(!1),[c,i]=d.exports.useState(),[n,o]=d.exports.useState(!1),[s,m]=d.exports.useState("adding"),[p,g]=d.exports.useState(),h=A(),E=O();function f(y){l(!0),E(Xe(y)).unwrap().then(C=>{r(C),l(!1)}).catch(()=>l(!1))}function w(y){E(Qe(y)).unwrap().then(()=>{c&&f(c.id)}).catch(C=>h({title:C,position:"top",status:"error"}))}return e.createElement(_,{pt:["32px",null,null,"40px"]},e.createElement(V,null,e.createElement(I,{w:"full",maxW:"650px",p:"32px"},e.createElement(F,null,e.createElement(R,{textAlign:"center",fontSize:"24px"},"Add or Change Order"),e.createElement(de,{onSelect:()=>{},onUserSelect:y=>{f(y.id),i(y)}}),e.createElement(F,{pt:"4",w:"full"},c&&e.createElement(j,{mb:"2",onClick:()=>{o(!0),m("adding")}},"+ add new Car for ",c.fullName),a?e.createElement(ne,null):t.length?t.map(y=>e.createElement(I,{w:"full",key:y.id,boxShadow:"0px 0px 10px lightgrey"},e.createElement(F,null,e.createElement(z,{w:"full",justify:"space-between"},e.createElement(j,{variant:"ghost",color:"autoOrange.500",onClick:()=>{o(!0),m("modifying"),g(y)}},"Modify order"),e.createElement(oe,{onClick:()=>w(y.id),icon:e.createElement(se,null),"aria-label":"delete order"})),e.createElement(ct,{order:y})))):e.createElement(R,{w:"full",textAlign:"center",pt:"4"},"No Ordered Cars"))),e.createElement(Ve,{isOpen:n,placement:"right",onClose:()=>{o(!1)},size:"md"},e.createElement($e,null),e.createElement(Ge,null,e.createElement(qe,null),e.createElement(Ye,null,"Change/Add a Car"),e.createElement(Ke,null,e.createElement(ft,{operation:s,userId:c?c.id:"",car:p,closeDrawer:()=>{o(!1),c&&f(c.id)}})))))))},_t=()=>{const{path:t}=be(),r=O();return e.createElement(_,null,e.createElement(Je,{w:"full",justify:"center",pt:"4",direction:["column",null,"row"],align:"center"},e.createElement(j,{variant:"link"},e.createElement(M,{to:`${t}/add-car`,style:{color:"black"}},"add new car")),e.createElement(q,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(j,{variant:"link"},e.createElement(M,{style:{color:"black"},to:`${t}/add-review`},"add new Review")),e.createElement(q,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(j,{variant:"link"},e.createElement(M,{style:{color:"black"},to:`${t}/add-order`},"Add/change Ordered Car")),e.createElement(q,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(j,{color:"red",border:"1px solid",onClick:()=>r(Ze())},"logout")),e.createElement(xe,null,e.createElement(P,{path:t,exact:!0},e.createElement(we,{to:`${t}/add-review`})),e.createElement(P,{path:`${t}/add-car`,render:()=>e.createElement(ut,null),exact:!0}),e.createElement(P,{path:`${t}/add-review`,render:()=>e.createElement(Et,null),exact:!0}),e.createElement(P,{path:`${t}/add-order`,render:()=>e.createElement(gt,null),exact:!0})))};export{_t as AdminPage,_t as default};
