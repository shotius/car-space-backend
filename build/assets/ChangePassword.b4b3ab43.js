import{u as y,i as E,r as x,R as e}from"./vendor.576a7237.js";import{u as P,c as k,d as b,i as C,e as T,V as j,F as d,f as v,T as F,g as m,o as R,h as S,j as A,C as D}from"./index.c7e2f3f1.js";import{C as V}from"./Card.9b36bb95.js";import{F as q,a as B}from"./formik.30c45d87.js";import{c as G,a as H}from"./yup.8a20e72b.js";import"./prop-types.d6ec705b.js";import"./react-redux.0b249e8a.js";import"./axios.7b768d2b.js";import"./focus-visible.c4e3ef79.js";const z=({})=>{const r=P(),n=y(),{token:u}=E(),[i,l]=x.exports.useState(""),s=k(),w=G().shape({password:H().min(4,"Too Short").max(50,"Too long").required("Required")});return e.createElement(q,{validationSchema:w,initialValues:{password:"",retypePassword:""},onSubmit:(t,{setErrors:f,setSubmitting:o,resetForm:h})=>{const{password:p,retypePassword:g}=t;p!==g?(f({password:"passwords does not patch",retypePassword:"passwords does not match"}),o(!1)):r(b({token:u,password:p})).unwrap().then(()=>{s({title:"Password changed successfully",position:"top",status:"success"}),n.push("/"),o(!1),h()}).catch(a=>{o(!1),C(a)&&a.error==="Token is outdated"?(l("Token you provided is oudated "),s({title:"Token you provided is oudated ",position:"top",status:"error"})):T(a)?a.errors.map(c=>{c.msg==="Token is invalid"&&l("Token is invalid"),s({title:c.msg,status:"error",position:"top"})}):s({title:"Something went wrong ;(, try later",position:"top",status:"error"})})}},({isSubmitting:t})=>e.createElement(B,null,e.createElement(j,{spacing:4,align:"flex-start"},e.createElement(d,{name:"password",type:"password",label:"Password",placeholder:"Password"}),e.createElement(d,{name:"retypePassword",type:"password",label:"Retype Password",placeholder:"Retype Password",w:"full"}),i&&e.createElement(v,null,e.createElement(F,{color:"red"},i),e.createElement(m,{onClick:()=>r(R()),color:"#427AD6"},"Go take one")),e.createElement(S,{isLoading:t,type:"submit"},"Change password"),e.createElement(m,{color:"#427AD6",fontSize:"14px",onClick:()=>n.push("/")},"Go on home page"))))},Q=({})=>e.createElement(A,null,e.createElement(D,{h:"70vh"},e.createElement(V,{p:["32px",null,"42px 64px"],w:"full",maxW:"450px"},e.createElement(z,null))));export{Q as ChangePasswordPage,Q as default};
