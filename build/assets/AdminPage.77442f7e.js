var ye=Object.defineProperty,we=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var ee=(t,n,r)=>n in t?ye(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,g=(t,n)=>{for(var r in n||(n={}))X.call(n,r)&&ee(t,r,n[r]);if(P)for(var r of P(n))Z.call(n,r)&&ee(t,r,n[r]);return t},b=(t,n)=>we(t,be(n));var j=(t,n)=>{var r={};for(var o in t)X.call(t,o)&&n.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&P)for(var o of P(t))n.indexOf(o)<0&&Z.call(t,o)&&(r[o]=t[o]);return r};import{p as ve,R as e,r as u,v as O,W as Se,w as $,x as z,V as v,af as U,X as J,z as R,ag as V,J as D,F as te,aJ as ae,ah as re,h as Q,Z as Ce,S as _,B as k,M as ke,N as Ae,O as Te,P as Oe,ai as Re,Q as De,y as ne,ay as Fe,$ as G,ab as Ne,l as I,k as je}from"./vendor.e3897af0.js";import{u as S,a as W,am as Be,C as M,an as Le,H as A,F as f,B as H,T as F,y as K,ao as Ue,ap as Ie,a1 as We,aq as Me,A as Pe,d as le,t as oe,ar as se,f as $e,p as ze,as as Ve,at as Ge,au as ce,av as He,aw as Ye,ax as qe,ay as Je,O as Qe,az as _e,M as Ke}from"./index.73d385ff.js";import{S as Xe,a as Ze,C as Y}from"./SelectTrigger.1d5df7ac.js";import{S as et}from"./ScrollToTop.ed80fc68.js";import{C as T}from"./Card.31eca356.js";import{T as ie,c as tt}from"./TextSecondary.cc9314f9.js";import{u as me,T as at}from"./types.e421f34e.js";import{T as de}from"./react-textarea-autosize.browser.esm.fe29e9d1.js";import{S as rt,a as nt,b as lt}from"./SelectWrapper.45606da1.js";import{d as ot,O as st}from"./OrderListCard.567d8954.js";import"./NotSpecified.116dafe4.js";const ct=c=>{var a=c,{name:t,type:n="file",multiple:r=!1,value:o=void 0,style:i={marginTop:"10px"}}=a,l=j(a,["name","type","multiple","value","style"]);const[s,d,{setValue:p}]=ve(t);return e.createElement("input",b(g(b(g({type:n,multiple:r},s),{value:o,style:i}),l),{onChange:E=>{const m=E.currentTarget.files;p(m)}}))},it=({})=>{const[t,n]=u.exports.useState(!1),r=S(),o=O(),i=W(s=>s.banners.banners),l={place:1,banner:null};u.exports.useEffect(()=>{c()},[]);function c(){r(Be())}function a(s){n(!0),r(Ue(s)).then(()=>{c(),n(!1),o({title:"banner deleted",position:"top"})}).catch(()=>{n(!1),o({title:"could not delelte the banner",position:"top",status:"error"})})}return e.createElement(M,{pt:["32px",null,null,"40px"]},e.createElement(Se,null,e.createElement(T,{w:"full"},e.createElement($,{initialValues:l,onSubmit:(s,{setSubmitting:d})=>{const{banner:p}=s,E=new FormData;p&&E.append("banner",p[0]),E.append("place",s.place.toString()),r(Le(E)).unwrap().then(()=>{o({title:"banner added",position:"top",status:"success"}),d(!1)}).catch(m=>{o({title:m,position:"top",status:"error"}),d(!1)})}},({isSubmitting:s})=>e.createElement(z,null,e.createElement(v,{align:"flex-start"},e.createElement(A,{textAlign:"center",w:"full"},"Add remove Banners"),e.createElement(f,{name:"place",type:"number",label:"banner index"}),e.createElement(ct,{name:"banner"}),e.createElement(H,{w:"200px",type:"submit",isLoading:s},"add banner")))))),e.createElement(T,{mt:"4",p:"0"},e.createElement(A,{w:"full",textAlign:"center",pt:"4"},"Banners"),e.createElement(v,{align:"flex-start"},i.map(s=>e.createElement(v,{w:"full",align:"flex-start",key:s.img,position:"relative"},e.createElement(F,{position:"absolute",top:"20px",left:"10px",bg:"white",zIndex:"1",padding:"4"},"index: ",s.place,"."),e.createElement(U,{w:"full"},e.createElement("img",{src:s.img})),e.createElement(J,{icon:e.createElement(K,null),"aria-label":"delete banner",position:"absolute",right:"10px",top:"20px",onClick:()=>a(s.id),isLoading:t}))))))},pe=c=>{var a=c,{avatar:t,index:n,mainText:r,secondaryText:o,verified:i}=a,l=j(a,["avatar","index","mainText","secondaryText","verified"]);return e.createElement(R,g({cursor:"pointer",transition:"all .2s",_hover:{bg:"autoGrey.200"},w:"full",py:"4",px:"2"},l),e.createElement(F,{alignSelf:"flex-end"},"."),e.createElement(U,{w:"40px",ratio:1/1,borderRadius:"100px",bg:"white"},e.createElement(V,{src:t,borderRadius:"100px",fallbackSrc:me})),e.createElement(v,{align:"flex-start",spacing:"0"},e.createElement(F,null,r),e.createElement(R,null,e.createElement(ie,null,o),i!==void 0&&e.createElement(e.Fragment,null,i!==void 0&&i?e.createElement(ie,{color:"green"},"verified"):e.createElement(F,{color:"red"},"no verified")))))},mt=({onSelect:t})=>{const[n,r]=u.exports.useState([]),o=S();u.exports.useEffect(()=>{i()},[]);function i(){o(Ie("")).unwrap().then(l=>r(l))}return e.createElement(v,{w:"full"},n.length?n.map(l=>e.createElement(pe,{key:l.id,avatar:l.avatar,mainText:l.fullName,secondaryText:l.role,verified:l.verified,onClick:()=>{t(l)}})):e.createElement(A,{py:"4"},"Dealers will Appear here"))},dt=({dealer:t})=>{const n=Object.values(at),{addingDealerCar:r}=W(a=>a.carsReducer),{catalogQuery:o}=W(a=>a.globalAppState),i=S(),l=O(),c={manufacturer:"",modelGroup:"",modelDetail:"",bodyStyle:"",damage:"",location:"",odometer:0,cylinders:0,drive:"",engine:0,transmission:"",year:"",keys:"",fuelType:"",color:"",price:0,description:"",photos:null,mostDemand:!1,dealerName:t?t.fullName:"",dealerId:t?t.id:void 0};return e.createElement($,{initialValues:c,enableReinitialize:!0,onSubmit:(a,{setErrors:s})=>{const C=a,{photos:d,keys:p}=C,E=j(C,["photos","keys"]),m=new FormData;for(let x in E)m.append(x,a[x]);if(d)for(let x of d)m.append("photo[]",x);p&&m.append("keys",We.YES);const h=new URLSearchParams(o);i(Me(m)).unwrap().then(()=>{i(Pe(h)),l({title:"New car edded successfully",position:"top",status:"success",duration:1500})}).catch(x=>{le(x)?x.status===422&&(s(oe(x.errors)),x.errors.forEach(({msg:N})=>l({title:N,position:"top",variant:"solid",status:"error",duration:2e3}))):l({title:"Error occured!",position:"top",variant:"solid",status:"error",duration:2e3})})}},({values:a,setFieldValue:s})=>e.createElement(z,null,e.createElement(A,null,"Add Car"),e.createElement(f,{name:"dealerName",placeholder:"Dealer name"}),e.createElement(f,{name:"manufacturer",placeholder:"Manufacturer"}),e.createElement(f,{name:"modelGroup",placeholder:"Model group"}),e.createElement(f,{name:"modelDetail",placeholder:"Model detail"}),e.createElement(f,{name:"bodyStyle",placeholder:"Body style"}),e.createElement(f,{name:"damage",placeholder:"damage"}),e.createElement(f,{name:"location",placeholder:"location"}),e.createElement(f,{name:"odometer",placeholder:"odometer",type:"number",value:a.odometer||""}),e.createElement(f,{name:"cylinders",placeholder:"cylinders",type:"number",value:a.cylinders||""}),e.createElement(f,{name:"drive",placeholder:"drive"}),e.createElement(f,{name:"engine",type:"number",value:a.engine||"",placeholder:"Engine capacity"}),e.createElement(D,{name:"transmission"},({field:d})=>e.createElement(te,{pt:"2"},e.createElement(ae,b(g({},d),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Transmission"}),n.map(p=>e.createElement("option",{key:p,value:p},p))))),e.createElement(f,{name:"year",placeholder:"Year",type:"number",value:a.year||""}),e.createElement(f,{name:"fuelType",placeholder:"Fuel type"}),e.createElement(f,{name:"color",placeholder:"Color"}),e.createElement(f,{name:"price",placeholder:"Price",type:"number",value:a.price||""}),e.createElement(se,{name:"keys",label:"Has keys"}),e.createElement(se,{name:"mostDemand",label:"Most demand"}),e.createElement(D,{name:"description"},({field:d})=>e.createElement(re,b(g({mt:"2"},d),{placeholder:"Write Description",size:"sm",as:de,maxRows:10}))),e.createElement(D,{name:"photos"},({field:d})=>e.createElement("input",b(g({type:"file"},d),{multiple:!0,value:void 0,style:{marginTop:"12px"},onChange:p=>{const E=p.currentTarget.files;s("photos",E)}}))),e.createElement(H,{type:"submit",mt:"4",mb:"4",isLoading:r},"Add")))},pt=()=>{const[t,n]=u.exports.useState();return e.createElement(M,{pt:["32px",null,null,"40px"]},e.createElement(Q,null,e.createElement(R,{w:"full",justify:"center"},e.createElement(T,{w:"500px",bg:"#fff",p:"4"},e.createElement(dt,{dealer:t})),e.createElement(T,{maxW:"250px",w:"full",alignSelf:"flex-start",p:"0"},e.createElement(mt,{onSelect:n})))))},ue=i=>{var l=i,{onSelect:t,name:n,onUserSelect:r}=l,o=j(l,["onSelect","name","onUserSelect"]);const{isOpen:c,onToggle:a,onOpen:s,onClose:d}=Ce(),[p,E]=u.exports.useState(),[m,h]=u.exports.useState(""),[C,x]=u.exports.useState(""),[N,y]=u.exports.useState([]),[B,q]=u.exports.useState(!1),Ee=S(),fe=O(),he=()=>{h(p?p.fullName:"Search for user...")},ge=w=>{q(!0),Ee(Ve(w)).unwrap().then(L=>{y(L),q(!1)}).catch(()=>{fe({title:"Could not fetch users",position:"top",status:"error",duration:2e3}),q(!1)})},xe=N.filter(w=>w.fullName.toLocaleLowerCase().includes(C.toLocaleLowerCase()));return e.createElement(rt,g({areOptionsOpen:c},o),e.createElement($e,{onClick:d,isActive:c}),e.createElement(nt,null,e.createElement(Xe,{areOptionsOpen:c,areOptionsSelected:!!p,clearCb:()=>{E(void 0)}},e.createElement(Ze,{autoComplete:"off",bg:"autoGrey.200",name:n||"",label:"Search for user...",placeholder:m,value:p?tt(p.fullName):C,onChange:w=>{const L=w.currentTarget.value;ge(L),x(L),E(void 0),L&&s()},onFocus:()=>{he()}})),e.createElement(lt,{isOpen:c},B?e.createElement(A,{textAlign:"center",w:"full"},"Fetching ..."," "):xe.map(w=>e.createElement(ze,{h:"80px",onClick:()=>{h(w.fullName),a(),t(w.id),r&&r(w),E(w)},key:w.id},e.createElement(R,{w:"full",py:"2"},e.createElement(U,{ratio:1/1,w:"50px"},e.createElement(V,{w:"full",h:"full",src:w.avatar,fallbackSrc:me,borderRadius:"100px"})),e.createElement(A,null,w.fullName)))))))},ut=({})=>{const t=S(),n=O(),{addingReview:r}=W(c=>c.customers),o={text:"",userId:"",photos:null},i=c=>{let a="";return c?c.length!==24&&(a="Invalid length"):a="Required",a},l=c=>{let a="";return c&&c.length>4&&(a="Photos must be less then 4"),a};return e.createElement($,{initialValues:o,onSubmit:(c,{setErrors:a})=>{const E=c,{photos:s}=E,d=j(E,["photos"]),p=new FormData;if(s)for(let m of s)p.append("photo[]",m);for(let[m,h]of Object.entries(d))p.append(m,h);t(Ge(p)).unwrap().then(()=>{t(ce("")),n({title:"New Review added",duration:2e3,status:"success",position:"top"})}).catch(m=>{var h;le(m)&&m.status===422&&((h=m.errors)==null?void 0:h.length)&&a(oe(m.errors))})}},({setFieldValue:c})=>e.createElement(z,null,e.createElement(A,{pb:"4"},"Add new Review"),e.createElement(D,{name:"userId",validate:i},({field:a,form:s})=>e.createElement(e.Fragment,null,e.createElement(ue,b(g({},a),{name:"userId",onSelect:d=>{c("userId",d)}})),e.createElement(F,{as:"span",color:"red"},s.errors.userId))),e.createElement(D,{name:"text"},({field:a})=>e.createElement(re,b(g({mt:"2"},a),{placeholder:"Write Description",size:"sm",as:de,maxRows:10}))),e.createElement(D,{name:"photos",validate:l},({field:a,form:s})=>e.createElement(e.Fragment,null,e.createElement("input",b(g({},a),{type:"file",multiple:!0,value:void 0,style:{marginTop:"12px"},onChange:d=>{c("photos",d.currentTarget.files)}})),e.createElement(F,{as:"span",display:"block",color:"red"},s.errors.photos))),e.createElement(H,{type:"submit",mt:"4",isLoading:r},"Add Review")))},Et=({})=>{const{reviews:t,removingReview:n,fetchingReviews:r}=W(l=>l.customers),o=S(),i=O();return u.exports.useEffect(()=>{o(ce(""))},[]),e.createElement(M,{pt:["32px",null,null,"40px"]},e.createElement(Q,null,e.createElement(v,{spacing:"32px"},e.createElement(T,{maxW:"500px",p:"4"},e.createElement(ut,null)),e.createElement(T,{w:"full",maxW:"500px"},e.createElement(v,{w:"full"},r?e.createElement(e.Fragment,null,"Getting Reviews...",e.createElement(_,null)):t.length?t.map((l,c)=>e.createElement(R,{key:c,bg:"autoGrey.200",w:"full",p:"4",borderRadius:"8",opacity:n?"0.5":"1"},e.createElement(J,{icon:e.createElement(K,null),"aria-label":"remove review",isLoading:n,onClick:()=>{o(He(l.id)).then(()=>i({title:"Review Deleted",status:"success",duration:2e3,position:"top"})).catch(()=>i({title:"Could not delete the review, contact to the developer",status:"error",duration:2e3,position:"top"}))}}),e.createElement(U,{ratio:1/1,minW:"80px"},e.createElement(V,{src:l.user&&l.user.avatar,fallbackSrc:"https://image.shutterstock.com/image-vector/profile-picture-avatar-icon-vector-260nw-1760295569.jpg",borderRadius:"100px"})),e.createElement(F,{overflowWrap:"anywhere"},l.text),l.photos&&l.photos.map(a=>e.createElement(U,{key:a,ratio:1/1,minW:"60px"},e.createElement(V,{src:a}))))):e.createElement(e.Fragment,null,"No Review Yet"))))))},ft=({setSelectedUser:t})=>{const[n,r]=u.exports.useState([]),[o,i]=u.exports.useState(!1),[l,c]=u.exports.useState(1),[a,s]=u.exports.useState(1),d=20,p=S();u.exports.useEffect(()=>{E(l)},[l]);function E(m){i(!0),p(Ye(`page=${m}&limit=${d}`)).unwrap().then(h=>{r(h.users),s(h.totalPages),i(!1)})}return e.createElement(v,{align:"flex-start",spacing:"0"},o&&e.createElement(Q,{w:"full"},e.createElement(_,{justifySelf:"center"})),n.map((m,h)=>e.createElement(pe,{key:m.id,index:(l-1)*d+h+1,onClick:()=>t(m),avatar:m.avatar,mainText:m.fullName,secondaryText:m.role,verified:m.verified})),e.createElement(R,{w:"full",justify:"space-between",px:"2",py:"4"},e.createElement(k,{variant:"link",color:"#427AD6",disabled:l===1,onClick:()=>{c(m=>m-1)}},"Prev"),e.createElement(k,{variant:"link",color:"#427AD6",disabled:l===a,onClick:()=>{c(l+1)}},"Next")))},ht=({operation:t,userId:n,car:r,closeDrawer:o})=>{const i=S(),l=O();let c;return r&&t==="modifying"?c={carName:r.carName,deliveryAt:r.deliveryAt?ot(r.deliveryAt.toString(),"-"):new Date,location:r.location,price:r.price,status:r.status}:c={carName:"",deliveryAt:new Date,location:"",price:0,status:""},e.createElement($,{initialValues:c,onSubmit:(a,{setSubmitting:s})=>{t==="modifying"&&r?i(qe({carId:r.id,props:b(g({},a),{userId:n})})).unwrap().then(()=>{s(!1),o()}).catch(d=>{s(!1),l({title:d,status:"error",position:"top"}),o()}):i(Je(b(g({},a),{userId:n}))).unwrap().then(()=>{s(!1),o()}).catch(d=>{l({title:d,status:"error",position:"top"}),s(!1),o()})}},({isSubmitting:a})=>e.createElement(z,null,e.createElement(f,{name:"carName",placeholder:"car name"}),e.createElement(f,{name:"location",placeholder:"Location"}),e.createElement(f,{name:"price",placeholder:"Price",type:"number"}),e.createElement(D,{name:"status"},({field:s})=>e.createElement(te,{pt:"2"},e.createElement(ae,b(g({},s),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Status"}),e.createElement("option",{value:"Completed"},"Completed"),e.createElement("option",{value:"On The Way"},"On the way")))),e.createElement(f,{name:"deliveryAt",bg:"#EAEAEB",opacity:"0.5",placeholder:"Status",type:"date",label:"Delivery at:  dd/mm/yyyy"}),e.createElement(H,{mt:"4",type:"submit",isLoading:a},t==="modifying"?"Update car":"Add Car")))},gt=({isEditing:t,setIsEditing:n,operationOnTheCar:r,selectedUser:o,selectedCar:i,handleGetUserOrders:l})=>e.createElement(ke,{isOpen:t,placement:"right",onClose:()=>{n(!1)},size:"md"},e.createElement(Ae,null),e.createElement(Te,null,e.createElement(Oe,null),e.createElement(Re,null,"Change/Add a Car"),e.createElement(De,null,e.createElement(ht,{operation:r,userId:o?o.id:"",car:i,closeDrawer:()=>{n(!1),o&&l(o.id)}})))),xt=({})=>{const[t,n]=u.exports.useState([]),[r,o]=u.exports.useState(!1),[i,l]=u.exports.useState(),[c,a]=u.exports.useState(!1),[s,d]=u.exports.useState("adding"),[p,E]=u.exports.useState(),m=O(),h=S();function C(y){o(!0),h(Qe(y)).unwrap().then(B=>{n(B),o(!1)}).catch(()=>o(!1))}function x(y){h(_e(y)).unwrap().then(()=>{i&&C(i.id)}).catch(B=>m({title:B,position:"top",status:"error"}))}function N(y){l(y),C(y.id)}return e.createElement(M,{pt:["32px",null,null,"40px"]},e.createElement(ne,{w:"full",justify:"flex-end",spacing:"4",direction:["column",null,"row"],align:"center"},e.createElement(T,{w:"full",maxW:"650px",p:"32px",alignSelf:"flex-start"},e.createElement(v,null,e.createElement(A,{textAlign:"center",fontSize:"24px"},"Add or Change Order"),e.createElement(ue,{onSelect:()=>{},onUserSelect:N}),e.createElement(v,{pt:"4",w:"full"},i&&e.createElement(k,{mb:"2",onClick:()=>{a(!0),d("adding")}},"+ add new Car for ",i.fullName),r?e.createElement(_,null):t.length?t.map(y=>e.createElement(T,{w:"full",key:y.id,boxShadow:"0px 0px 10px lightgrey"},e.createElement(v,null,e.createElement(R,{w:"full",justify:"space-between"},e.createElement(k,{variant:"ghost",color:"autoOrange.500",onClick:()=>{a(!0),d("modifying"),E(y)}},"Modify order"),e.createElement(J,{onClick:()=>x(y.id),icon:e.createElement(K,null),"aria-label":"delete order"})),e.createElement(st,{order:y})))):e.createElement(A,{w:"full",textAlign:"center",pt:"4"},"No Ordered Cars")))),e.createElement(T,{maxW:["full","450px","250px"],px:"0",w:"full",alignSelf:"flex-start"},e.createElement(ft,{setSelectedUser:N})),e.createElement(gt,{isEditing:c,setIsEditing:a,operationOnTheCar:s,selectedUser:i,selectedCar:p,handleGetUserOrders:C})))},Ft=()=>{const{path:t}=Fe(),n=S();return e.createElement(M,null,e.createElement(et,null),e.createElement(ne,{w:"full",justify:"center",pt:"4",direction:["column",null,"row"],align:"center"},e.createElement(k,{variant:"link"},e.createElement(G,{to:`${t}/add-car`,style:{color:"black"}},"Car")),e.createElement(Y,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(k,{variant:"link"},e.createElement(G,{style:{color:"black"},to:`${t}/add-review`},"Review")),e.createElement(Y,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(k,{variant:"link"},e.createElement(G,{style:{color:"black"},to:`${t}/add-order`},"Ordereds")),e.createElement(Y,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(k,{variant:"link"},e.createElement(G,{style:{color:"black"},to:`${t}/banners`},"Banners")),e.createElement(Y,{height:"20px",borderColor:"black",display:["none",null,"block"]}),e.createElement(k,{color:"red",border:"1px solid",onClick:()=>n(Ke())},"logout")),e.createElement(Ne,null,e.createElement(I,{path:t,exact:!0},e.createElement(je,{to:`${t}/add-review`})),e.createElement(I,{path:`${t}/add-car`,render:()=>e.createElement(pt,null),exact:!0}),e.createElement(I,{path:`${t}/add-review`,render:()=>e.createElement(Et,null),exact:!0}),e.createElement(I,{path:`${t}/add-order`,render:()=>e.createElement(xt,null),exact:!0}),e.createElement(I,{path:`${t}/banners`,render:()=>e.createElement(it,null),exact:!0})))};export{Ft as AdminPage,Ft as default};
