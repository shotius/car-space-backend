import{c as x,f as C,e as l,K as u,o as w,j as e,br as B,A as b,az as S,V as y,Z as c,T as E,r as a,v as p,w as I,C as T,bi as j}from"./index.8597a41f.js";import{b as d}from"./EditIcon.e5519546.js";import{u as k}from"./useBlogEditDrawer.b3736ff2.js";import{u as A}from"./useRoles.6ffe10b6.js";import{E as v}from"./EditButton.db50cfcc.js";import{C as H}from"./Card.19089032.js";import{I as R}from"./chakra-ui-image.esm.bf1f5a86.js";import{S as z}from"./ScrollToTop.9976e144.js";const D=({getAllBlogs:r,blog:t})=>{const n=x(),{isAdmin:o}=A(),i=C(),{toggleEditingDrawer:f,EditBlogDrawer:m}=k();function g(s){s.stopPropagation(),f()}function h(s){s.stopPropagation(),confirm("Do you realy want to delete?")&&d.deleteBlogById(t.id).then(()=>{i({title:"blog deleted",position:"top",status:"success"}),r()}).catch(()=>i({title:"Could not delete post",position:"top",status:"error"}))}return l(u,{children:[l(H,{p:"0",_hover:{boxShadow:"0 0.7rem 1.5rem rgba(0, 0, 0, 0.1)",transition:"all .3s"},cursor:"pointer",onClick:()=>n.push(`/blog/${t.id}`),position:"relative",children:[o&&l(w,{pos:"absolute",w:"full",justifyContent:"end",zIndex:"banner",children:[e(v,{onClick:g}),e(B,{onClick:h})]}),e(b,{ratio:2/1,children:e(R,{src:t.img||S,borderTopRadius:"8px",h:"177px",w:"full"})}),l(y,{p:"4",pb:"37px",spacing:["2",null,null,"1.5"],alignItems:"flex-start",children:[e(c,{fontSize:"16px",lineHeight:"21px",noOfLines:2,children:t.header}),e(E,{lineHeight:"24px",w:"full",noOfLines:[3,null,null,2],whiteSpace:"pre-wrap",children:t.body})]})]}),e(m,{blog:t,operation:"modifing",refetchCb:r})]})},M=()=>{const[r,t]=a.exports.useState([]);function n(){d.getAllBlogs().then(o=>t(o.results))}return a.exports.useEffect(()=>{n()},[]),l(u,{children:[e(z,{}),e(p,{p:"0",pt:[null,null,null,"48px"],children:e(I,{p:"0",w:"full",h:["300px",null,null,"289px"],backgroundImage:"https://wallpaperaccess.com/full/3032936.jpg",bgPos:"center",objectFit:"cover",borderRadius:{lg:"8px"},children:e(T,{h:"full",children:e(c,{color:"white",fontSize:["36px","45px",null,"50px","60px","81px"],isTruncated:!0,children:"Blogs"})})})}),e(p,{p:["4",null,null," 0"],children:e(j,{w:"full",templateColumns:["1fr","1fr 1fr",null,"repeat(3, 1fr)"],spacing:["4",null,null,"32px"],mt:["48px",null,null,"64px"],children:r.map(o=>e(D,{blog:o,getAllBlogs:n},o.id))})})]})};export{M as BlogPage,M as default};
