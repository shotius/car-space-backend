import{c as x,f as C,e as l,K as c,o as b,j as e,I as w,bq as B,A as S,az as I,V as y,Z as u,T as E,r as i,v as p,w as T,C as j,bh as k}from"./index.b1f60830.js";import{u as v,E as A}from"./useBlogEditDrawer.8e209e32.js";import{b as d}from"./AddBlogForm.3c63c2c1.js";import{u as H}from"./useRoles.cb5a3350.js";import{C as R}from"./Card.0399cbd3.js";import{I as z}from"./chakra-ui-image.esm.9458b879.js";import{S as D}from"./ScrollToTop.3f3082a0.js";const L=({getAllBlogs:r,blog:t})=>{const n=x(),{isAdmin:o}=H(),a=C(),{toggleEditingDrawer:f,EditBlogDrawer:g}=v();function h(s){s.stopPropagation(),f()}function m(s){s.stopPropagation(),confirm("Do you realy want to delete?")&&d.deleteBlogById(t.id).then(()=>{a({title:"blog deleted",position:"top",status:"success"}),r()}).catch(()=>a({title:"Could not delete post",position:"top",status:"error"}))}return l(c,{children:[l(R,{p:"0",_hover:{boxShadow:"0 0.7rem 1.5rem rgba(0, 0, 0, 0.1)",transition:"all .3s"},cursor:"pointer",onClick:()=>n.push(`/blog/${t.id}`),position:"relative",children:[o&&l(b,{pos:"absolute",w:"full",justifyContent:"end",zIndex:"banner",children:[e(w,{"aria-label":"edit",as:A,bg:"transparent",_hover:{bg:"transparent"},onClick:h}),e(B,{onClick:m})]}),e(S,{ratio:2/1,children:e(z,{src:t.img||I,borderTopRadius:"8px",h:"177px",w:"full"})}),l(y,{p:"4",pb:"37px",spacing:["2",null,null,"1.5"],alignItems:"flex-start",children:[e(u,{fontSize:"16px",lineHeight:"21px",noOfLines:2,children:t.header}),e(E,{lineHeight:"24px",w:"full",noOfLines:[3,null,null,2],whiteSpace:"pre-wrap",children:t.body})]})]}),e(g,{blog:t,operation:"modifing",refetchCb:r})]})},q=()=>{const[r,t]=i.exports.useState([]);function n(){d.getAllBlogs().then(o=>t(o.results))}return i.exports.useEffect(()=>{n()},[]),l(c,{children:[e(D,{}),e(p,{p:"0",pt:[null,null,null,"48px"],children:e(T,{p:"0",w:"full",h:["300px",null,null,"289px"],backgroundImage:"https://wallpaperaccess.com/full/3032936.jpg",bgPos:"center",objectFit:"cover",borderRadius:{lg:"8px"},children:e(j,{h:"full",children:e(u,{color:"white",fontSize:["36px","45px",null,"50px","60px","81px"],isTruncated:!0,children:"Blogs"})})})}),e(p,{p:["4",null,null," 0"],children:e(k,{w:"full",templateColumns:["1fr","1fr 1fr",null,"repeat(3, 1fr)"],spacing:["4",null,null,"32px"],mt:["48px",null,null,"64px"],children:r.map(o=>e(L,{blog:o,getAllBlogs:n},o.id))})})]})};export{q as BlogPage,q as default};
