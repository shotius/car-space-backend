import{u as E,i as g,r as x,R as e}from"./vendor.64e57edd.js";import{u as P,a as k,c as b,i as C,b as j,V as T,F as i,H as F,T as R,d,o as S,B as v,C as A,e as D}from"./index.bd088769.js";import{C as V}from"./Card.e64b9dfe.js";import{F as B,a as H}from"./formik.178388d5.js";import{c as q,a as G}from"./yup.5af68d69.js";import"./prop-types.d6ec705b.js";import"./react-redux.d0311eef.js";import"./axios.7b768d2b.js";import"./focus-visible.85b77dad.js";const z=({})=>{const o=P(),r=E(),{token:c}=g(),[n,u]=x.exports.useState(""),s=k(),m=q().shape({password:G().min(4,"Too Short").max(50,"Too long").required("Required")});return e.createElement(B,{validationSchema:m,initialValues:{password:"",retypePassword:""},onSubmit:(a,{setErrors:w,setSubmitting:p,resetForm:h})=>{const{password:l,retypePassword:f}=a;l!==f?w({password:"passwords does not patch",retypePassword:"passwords does not match"}):o(b({token:c,password:l})).unwrap().then(()=>{s({title:"Password changed successfully",position:"top",status:"success"}),r.push("/"),p(!1),h()}).catch(t=>{p(!1),C(t)&&t.error==="Token is outdated"?(u("Token you provided is oudated "),s({title:"Token you provided is oudated ",position:"top",status:"error"})):j(t)?t.errors.map(y=>{s({title:y,status:"error",position:"top"})}):s({title:"Something went wrong ;(, try later",position:"top",status:"error"})})}},({isSubmitting:a})=>e.createElement(H,null,e.createElement(T,{spacing:4,align:"flex-start"},e.createElement(i,{name:"password",type:"password",label:"Password",placeholder:"Password"}),e.createElement(i,{name:"retypePassword",type:"password",label:"Retype Password",placeholder:"Retype Password",w:"full"}),n&&e.createElement(F,null,e.createElement(R,null,n),e.createElement(d,{onClick:()=>o(S()),color:"#427AD6"},"Go take one")),e.createElement(v,{isLoading:a,type:"submit"},"Change password"),e.createElement(d,{color:"#427AD6",fontSize:"14px",onClick:()=>r.push("/")},"Go on home page"))))},Q=({})=>e.createElement(A,null,e.createElement(D,{h:"70vh"},e.createElement(V,{p:["32px",null,"42px 64px"],w:"full",maxW:"450px"},e.createElement(z,null))));export{Q as ChangePasswordPage,Q as default};
