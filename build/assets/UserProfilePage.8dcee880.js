var he=Object.defineProperty;var O=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var Z=(t,a,r)=>a in t?he(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,K=(t,a)=>{for(var r in a||(a={}))V.call(a,r)&&Z(t,r,a[r]);if(O)for(var r of O(a))q.call(a,r)&&Z(t,r,a[r]);return t};var X=(t,a)=>{var r={};for(var n in t)V.call(t,n)&&a.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&O)for(var n of O(t))a.indexOf(n)<0&&q.call(t,n)&&(r[n]=t[n]);return r};import{r as i,u as W,k as U,R as e,S as xe,f as D,e as be}from"./vendor.576a7237.js";import{$ as y,a8 as we,a9 as ve,ab as Ce,a1 as S,a0 as ye,ac as k,B as J,k as M,g as Se,f,c as _,u as j,n as Q,H as d,V as p,C as T,T as m,h as ee,aT as te,aU as Te,a as b,M as ke,x as ae,m as je,q as re,w as Pe,y as Ie,aV as Ae,A as P,N,S as Oe,O as ne,aW as ze,P as Fe,D as Le,aX as Re,j as We,aY as Ue}from"./index.e98801c6.js";import{U as De}from"./UserAvatar.3abfd57a.js";import{C as I}from"./Card.26762e0d.js";import{A as Me}from"./ArrowPrevIcon.3997d1a4.js";import{C as _e}from"./react-easy-crop.604fc41e.js";import{a as Ne,S as Be,s as $e}from"./SliderBlue.3d655828.js";import{B as le,C as He}from"./CatalogListWrap.854b7cec.js";import{T as E,c as Ge,t as se}from"./TextSecondary.844fd636.js";import{B as Ye,C as Ve}from"./CarCardHeading.1546cb44.js";import{N as u}from"./NotSpecified.5720fdfc.js";import{I as z}from"./image.74ff6791.js";import{A as F}from"./aspect-ratio.dbe39bbe.js";import{S as qe}from"./simple-grid.bca3738f.js";import{d as oe,O as Ze}from"./OrderListCard.6d17b844.js";import"./prop-types.d6ec705b.js";import"./react-redux.0b249e8a.js";import"./axios.7b768d2b.js";import"./formik.30c45d87.js";import"./yup.df40d5b6.js";import"./focus-visible.c4e3ef79.js";function w(){return w=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w.apply(this,arguments)}function B(t,a){if(t==null)return{};var r={},n=Object.keys(t),s,l;for(l=0;l<n.length;l++)s=n[l],!(a.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Ke=y((t,a)=>{var r=we("Table",t),n=ve(t),{className:s}=n,l=B(n,["className"]);return i.exports.createElement(Ce,{value:r},i.exports.createElement(S.table,w({role:"table",ref:a,__css:r.table,className:ye("chakra-table",s)},l)))}),Xe=y((t,a)=>{var r=k();return i.exports.createElement(S.thead,w({},t,{ref:a,__css:r.thead}))}),Je=y((t,a)=>{var r=k();return i.exports.createElement(S.tbody,w({},t,{ref:a,__css:r.tbody}))}),v=y((t,a)=>{var{isNumeric:r}=t,n=B(t,["isNumeric"]),s=k();return i.exports.createElement(S.th,w({},n,{ref:a,__css:s.th,"data-is-numeric":r}))}),ce=y((t,a)=>{var r=k();return i.exports.createElement(S.tr,w({role:"row"},t,{ref:a,__css:r.tr}))}),C=y((t,a)=>{var{isNumeric:r}=t,n=B(t,["isNumeric"]),s=k();return i.exports.createElement(S.td,w({role:"gridcell"},n,{ref:a,__css:s.td,"data-is-numeric":r}))});const $=c=>{var o=c,{activeBg:t="autoOrange.100",activeColor:a="#FB5607",to:r,clickCallback:n,children:s}=o,l=X(o,["activeBg","activeColor","to","clickCallback","children"]);const g=W(),h=U({path:r,exact:!0});return e.createElement(J,K({w:"full",borderRadius:"none",display:"flex",justifyContent:["start",null,null,"center"],p:"32px 32px",fontWeight:"500",bg:h?t:"#fff",color:h?a:"#000",_hover:{bg:h?"autoOrange.200":"autoGrey.200"},_active:{bg:"autoOrange.300"},onClick:()=>{n?n():g.push(r)}},l),s)},Qe=({zoom:t,imageUrl:a,onCropComplete:r,onZoomChange:n})=>{const[s,l]=i.exports.useState({x:0,y:0});return e.createElement(_e,{image:a,crop:s,zoom:t,cropShape:"round",aspect:1/1,onCropChange:l,onCropComplete:r,onZoomChange:n})},et=({acceptedFileTypes:t,setFile:a,setFilePath:r,setIsEditing:n})=>{const s=i.exports.useRef(null),l=o=>{o.currentTarget.files&&(r(URL.createObjectURL(o.currentTarget.files[0])),a(o.currentTarget.files[0]),n(!0))},c=()=>{var o;console.log("clicked"),(o=s.current)==null||o.click()};return e.createElement(M,{onClick:c,h:"120%",cursor:"pointer"},e.createElement(Se,{bg:"tranparent",h:"full",w:"full"},"upload a file"),e.createElement("input",{type:"file",accept:t,ref:s,onChange:o=>l(o),style:{display:"none"}}))},tt=({onChange:t,value:a,min:r,max:n,step:s})=>e.createElement(f,{w:"full",justify:"center"},e.createElement(le,{fontSize:"30px",_active:{bg:"autoGrey.200"},onClick:()=>{a>r&&t(Ne(a,.1))}},"-"),e.createElement(Be,{value:a,min:r,max:n,step:s,onChange:l=>t(l),w:"50%"}),e.createElement(le,{fontSize:"20px",_active:{bg:"autoGrey.200"},onClick:()=>{a<n&&t($e(a,.1))}},"+")),at=t=>new Promise((a,r)=>{const n=new Image;n.addEventListener("load",()=>a(n)),n.addEventListener("error",s=>r(s)),n.setAttribute("crossOrigin","anonymous"),n.src=t});function rt(t){return t*Math.PI/180}async function nt(t,a,r=0){const n=await at(t),s=document.createElement("canvas"),l=s.getContext("2d"),c=Math.max(n.width,n.height),o=2*(c/2*Math.sqrt(2));s.width=o,s.height=o,l==null||l.translate(o/2,o/2),l==null||l.rotate(rt(r)),l==null||l.translate(-o/2,-o/2),l==null||l.drawImage(n,o/2-n.width*.5,o/2-n.height*.5);const g=l==null?void 0:l.getImageData(0,0,o,o);return s.width=a.width,s.height=a.height,g&&(l==null||l.putImageData(g,Math.round(0-o/2+n.width*.5-a.x),Math.round(0-o/2+n.height*.5-a.y))),new Promise(h=>{s.toBlob(A=>{h(A)},"image/jpeg")})}const ie=({toast:t,message:a})=>{t({title:a,status:"error",duration:2e3,isClosable:!0,position:"top"})},me=({})=>{const[t,a]=i.exports.useState(1.3),[r,n]=i.exports.useState(null),[s,l]=i.exports.useState(null),[c,o]=i.exports.useState(""),[g,h]=i.exports.useState(!1),[A,ue]=i.exports.useState(null),[pe,L]=i.exports.useState(!1),H=_(),G=j(),Y=()=>{g?(h(!1),o("")):G(te())},fe=x=>{a(x)},de=i.exports.useCallback((x,R)=>{n(R)},[]),Ee=async()=>{const x=await nt(c,r);a(1),o(URL.createObjectURL(x)),h(!1),ue(x)},ge=async()=>{const x=new FormData;A?(x.append("profile-avatar",A,"coppedImage.jpg"),L(!0),G(Te(x)).unwrap().then(()=>{L(!1),Y()}).catch(R=>{console.log("error: ",R),L(!1),ie({toast:H,message:"Unable to save photo. Please, try later"})})):ie({toast:H,message:"Please Choose the picture."})};return e.createElement(e.Fragment,null,e.createElement(f,{position:"absolute",left:"10px",top:"20px",spacing:"2"},e.createElement(Q,{position:"relative",top:"0",left:"0",as:Me,boxSize:6}),e.createElement(d,{fontSize:"20px"},"Profile Picture")),e.createElement(p,{w:"full",pt:"32px",spacing:"2"},e.createElement(T,{p:"8"},e.createElement(M,{h:"180px",w:"180px",borderRadius:"1000px",bg:"autoBlue.400",position:"relative",overflow:"hidden"},e.createElement(Qe,{imageUrl:c,zoom:t,onZoomChange:fe,onCropComplete:de}))),g?e.createElement(e.Fragment,null,e.createElement(m,{fontSize:"16px"},"Scale and Crop"),e.createElement(tt,{min:1,max:3,step:.1,value:t,onChange:a})):e.createElement(et,{setFilePath:o,setFile:l,acceptedFileTypes:"image/*",setIsEditing:h}),e.createElement(f,{w:"full",pt:"24px"},e.createElement(ee,{bg:"autoGrey.400",color:"black",_active:{bg:"autoGrey.600"},onClick:Y},"Cancel"),e.createElement(ee,{isLoading:pe,onClick:()=>{g?Ee():ge()}},g?"Crop":"Save"))))},lt=({})=>{const{isChangeProfilePictureOpen:t,screen:a}=b(l=>l.globalAppState),{isDesktop:r}=a,n=j(),s=()=>n(te());return e.createElement(e.Fragment,null,r?e.createElement(ke,{isOpen:t,onClose:s,isCentered:!0,blockScrollOnMount:!0},e.createElement(ae,null),e.createElement(je,{p:"32px 48px",w:"450px"},e.createElement(Q,{top:"30px",right:"48px"}),e.createElement(me,null),e.createElement(re,{p:"0"}))):e.createElement(Pe,{isOpen:t,placement:"bottom",onClose:s,size:"full"},e.createElement(ae,null),e.createElement(Ie,{maxH:"100%"},e.createElement(re,null,e.createElement(T,{h:"full"},e.createElement(p,{w:"full"},e.createElement(me,null)))))))},st=({})=>{const[t,a]=i.exports.useState(""),{path:r}=U(),n=j(),{avatar:s,fullName:l,phone:c}=b(o=>o.userInfoSlice);return i.exports.useEffect(()=>{s&&a(s)},[s]),e.createElement(I,{bg:"white",p:"0",w:["full",null,null,"200px"],maxH:"400px"},e.createElement(M,{p:"32px"},e.createElement(De,{username:l,image:t,secondaryText:`+995 ${c}`,size:"70px",showPhotoChange:!0})),e.createElement(lt,null),e.createElement(p,{pb:"24px",spacing:"0"},e.createElement($,{to:`${r}/order-list`},"Order List"),e.createElement($,{to:`${r}/favourites`},"Favourites"),e.createElement($,{to:"/home",clickCallback:()=>n(Ae())},"Log out")))},ot=({car:t})=>{const a=W();return e.createElement(I,{bg:"autoGrey.500",w:"full",p:"0",cursor:"pointer",onClick:()=>a.push(`/catalog/car/${t.id}`)},e.createElement(f,{w:"full",justify:"space-between",p:"16px",align:"stretch"},e.createElement(f,{spacing:"4",minW:"220px",p:"0"},e.createElement(F,{ratio:78/66,minW:"78px"},e.createElement(z,{src:t==null?void 0:t.imgUrls[0],borderRadius:"8px",fallbackSrc:"https://via.placeholder.com/150"})),e.createElement(p,{align:"flex-start"},e.createElement(E,null,"Name"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.m?P(t.m):e.createElement(u,null)," ",t.mG?P(t.mG):e.createElement(u,{pl:"2",children:""})))),e.createElement(p,{align:"flex-start",w:"full",maxW:"80px",pt:"2"},e.createElement(E,null,"Year"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.y||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Damage"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.dmg?e.createElement(e.Fragment,null,P(t.dmg)):e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Location"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.lC||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Engine"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.eng||e.createElement(u,null))),e.createElement(Ye,{carId:t.id,h:"46px",w:"45px"})))},ct=({})=>{const{favouriteCars:t}=b(r=>r.userInfoSlice),{favouriteCarsFetching:a}=b(r=>r.userInfoSlice);return e.createElement(I,{w:"full",p:"32px"},e.createElement(p,{w:"full",spacing:"4"},a?e.createElement(T,{w:"full",h:"300px"},e.createElement(N,null)):t.length?t.map(r=>e.createElement(ot,{key:r.id,car:r})):e.createElement(d,null,"Your Favourites list is empty")))},it=({car:t})=>{const a=t.imgUrls,r=W();return e.createElement(I,{w:"full",p:"4",onClick:()=>r.push(`/catalog/car/${t.id}`)},e.createElement(p,{spacing:"4"},e.createElement(Ve,{model:`${t.m} ${t.mG}`,id:t.id,year:Number(t.y)}),e.createElement(qe,{gridTemplateAreas:'"a a b" "a a c"',w:"full",maxH:"130px",gap:"2"},e.createElement(F,{overflow:"hidden",borderRadius:"8px",ratio:191/130,w:"full",gridArea:"a",maxH:"130px"},e.createElement(z,{src:a&&a.length?a[0]:"https://via.placeholder.com/150",borderRadius:"8px"})),e.createElement(F,{ratio:191/130,w:"full",gridArea:"b",maxH:"61px"},e.createElement(z,{src:a&&a.length?a[1]:"https://via.placeholder.com/150",borderRadius:"8px"})),e.createElement(F,{ratio:191/130,w:"full",gridArea:"c",maxH:"61px"},e.createElement(z,{src:a&&a.length?a[2]:"https://via.placeholder.com/150",borderRadius:"8px"}))),e.createElement(p,{divider:e.createElement(Oe,null),w:"full"},e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Damage"),e.createElement(d,null,t.dmg?Ge(t.dmg):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Mileage"),e.createElement(d,null,t.od?se(t.od):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Location"),e.createElement(d,null,t.lC?P(t.lC):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Engine"),e.createElement(d,null,t.eng?P(t.eng.toString()):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Esimate Price"),e.createElement(d,null,t.price?e.createElement(e.Fragment,null,"$ ",se(t.price)):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Total Price"),e.createElement(d,null,"$20 000")))))},mt=({})=>{const{favouriteCars:t}=b(a=>a.userInfoSlice);return e.createElement(He,{pt:"48px"},t.map(a=>e.createElement(it,{key:a.id,car:a})))},ut=({})=>{const{isDesktop:t}=ne(),a=j();return i.exports.useEffect(()=>{a(ze("")),a(Fe(""))},[]),e.createElement(e.Fragment,null,t?e.createElement(ct,null):e.createElement(mt,null))},pt=({})=>e.createElement(ut,null),ft=({orderList:t})=>{const[a,r]=i.exports.useState([]),n=b(c=>c.orderedCars.fetching),s=_(),l=c=>{a.includes(c)?r(a.filter(o=>o!==c)):r(a.concat(c))};return e.createElement(I,{p:"32px",w:"full"},n?e.createElement(T,{w:"full",h:"full"},e.createElement(N,null)):t.length?e.createElement(Ke,null,e.createElement(Xe,null,e.createElement(ce,{opacity:"0.5",fontSize:"14px",fontWeight:"light"},e.createElement(v,{p:[null,null,null,"2","4"],isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Order Id")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Name")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Created")),e.createElement(v,{isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Delivery Date")),e.createElement(v,{fontWeight:"light",p:[null,null,null,"2","4"]},e.createElement(m,{textTransform:"capitalize"},"Location")),e.createElement(v,{isTruncated:!0,p:"4",fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Total Price")),e.createElement(v,{fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Status")),e.createElement(v,{fontWeight:"light"}))),e.createElement(Je,null,t.map((c,o)=>e.createElement(ce,{key:o,pt:"50px",_hover:{bg:"autoGrey.100"}},e.createElement(C,{w:"full",px:"4",title:c.id,py:[null,null,"8","8",""]},e.createElement(d,{w:"80px",isTruncated:!0,cursor:"pointer",onClick:()=>navigator.clipboard.writeText(c.id).then(()=>s({title:"Id copied to the clipboard",status:"success",position:"top"}))},c.id)),e.createElement(C,{title:c.carName,px:""},e.createElement(m,{noOfLines:a.includes(o)?10:1,fontSize:"16px",w:"100px"},c.carName)),e.createElement(C,{px:"2"},c.createdAt?oe(c.createdAt.toString()):e.createElement(u,null)),e.createElement(C,null,c.deliveryAt?oe(c.deliveryAt.toString()):e.createElement(u,null)," "),e.createElement(C,{p:[null,null,null,"2","4"]},c.location," "),e.createElement(C,{px:"4",title:`$ ${c.price}`},e.createElement(m,{fontSize:"inherit",maxW:"80px",isTruncated:!0},"$ ",c.price*1)),e.createElement(C,null,e.createElement(m,{whiteSpace:"nowrap"},c.status)," "),e.createElement(C,{p:"0"},e.createElement(J,{variant:"link",minH:"50px",onClick:()=>l(o)},e.createElement(Le,{transform:a.includes(o)?"rotate(180deg)":"none",transition:"all .2s"}))))))):e.createElement(T,null,e.createElement(d,null,"Your order list is empty")))},dt=({orderList:t})=>{const a=b(r=>r.orderedCars.fetching);return e.createElement(p,{w:"full",spacing:"24px",pt:"48px"},a?e.createElement(T,null,e.createElement(N,null)):t.length?t.map((r,n)=>e.createElement(Ze,{key:n,order:r})):e.createElement(d,null,"Your order list is empty"))},Et=({})=>{const[t,a]=i.exports.useState([]),{isDesktop:r}=ne(),n=b(c=>c.userInfoSlice.id),s=_(),l=j();return i.exports.useEffect(()=>{n&&l(Re(n)).unwrap().then(c=>a(c)).catch(c=>s({title:c,status:"error",position:"top"}))},[n]),e.createElement(e.Fragment,null,r?e.createElement(ft,{orderList:t}):e.createElement(dt,{orderList:t}))},Dt=()=>{const{path:t}=U();return e.createElement(We,{pt:["16px","26px","32px","48px"]},e.createElement(Ue,{direction:["column",null,null,"row"],spacing:"24px",w:"full"},e.createElement(st,null),e.createElement(xe,null,e.createElement(D,{exact:!0,path:t,render:()=>e.createElement(be,{to:`${t}/order-list`})}),e.createElement(D,{exact:!0,path:`${t}/order-list`,render:()=>e.createElement(Et,null)}),e.createElement(D,{exact:!0,path:`${t}/favourites`,render:()=>e.createElement(pt,null)}))))};export{Dt as UserProfilePage,Dt as default};
