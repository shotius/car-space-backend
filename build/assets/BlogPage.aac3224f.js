import{c as x,f as C,e as o,K as u,o as b,j as e,I as w,bq as B,az as S,V as I,Z as c,T as y,r as i,v as p,w as E,C as T,bh as j}from"./index.5a316967.js";import{u as k,E as v}from"./useBlogEditDrawer.89a23d81.js";import{b as d}from"./AddBlogForm.38fa132f.js";import{u as H}from"./useRoles.de92b421.js";import{C as A}from"./Card.c49580d4.js";import{I as D}from"./chakra-ui-image.esm.43e140aa.js";import{S as L}from"./ScrollToTop.ec6dae38.js";const P=({getAllBlogs:r,blog:t})=>{const n=x(),{isAdmin:l}=H(),a=C(),{toggleEditingDrawer:f,EditBlogDrawer:g}=k();function h(s){s.stopPropagation(),f()}function m(s){s.stopPropagation(),confirm("Do you realy want to delete?")&&d.deleteBlogById(t.id).then(()=>{a({title:"blog deleted",position:"top",status:"success"}),r()}).catch(()=>a({title:"Could not delete post",position:"top",status:"error"}))}return o(u,{children:[o(A,{p:"0",_hover:{boxShadow:"0 0.7rem 1.5rem rgba(0, 0, 0, 0.1)",transition:"all .3s"},cursor:"pointer",onClick:()=>n.push(`/blog/${t.id}`),position:"relative",children:[l&&o(b,{pos:"absolute",w:"full",justifyContent:"end",children:[e(w,{"aria-label":"edit",as:v,bg:"transparent",_hover:{bg:"transparent"},onClick:h}),e(B,{onClick:m})]}),e(D,{src:t.img||S,borderTopRadius:"8px",h:"177px",w:"full"}),o(I,{p:"4",pb:"37px",spacing:["2",null,null,"1.5"],alignItems:"flex-start",children:[e(c,{fontSize:"16px",lineHeight:"21px",noOfLines:2,children:t.header}),e(y,{lineHeight:"24px",w:"full",noOfLines:[3,null,null,2],whiteSpace:"pre-wrap",children:t.body})]})]}),e(g,{blog:t,operation:"modifing",refetchCb:r})]})},$=()=>{const[r,t]=i.exports.useState([]);function n(){d.getAllBlogs().then(l=>t(l.results))}return i.exports.useEffect(()=>{n()},[]),o(u,{children:[e(L,{}),e(p,{p:"0",pt:[null,null,null,"48px"],children:e(E,{p:"0",w:"full",h:["300px",null,null,"289px"],backgroundImage:"https://wallpaperaccess.com/full/3032936.jpg",bgPos:"center",objectFit:"cover",borderRadius:{lg:"8px"},children:e(T,{h:"full",children:e(c,{color:"white",fontSize:["36px","45px",null,"50px","60px","81px"],isTruncated:!0,children:"Blogs"})})})}),e(p,{p:["4",null,null," 0"],children:e(j,{w:"full",templateColumns:["1fr","1fr 1fr",null,"repeat(3, 1fr)"],spacing:["4",null,null,"32px"],mt:["48px",null,null,"64px"],children:r.map(l=>e(P,{blog:l,getAllBlogs:n},l.id))})})]})};export{$ as BlogPage,$ as default};
