var xe=Object.defineProperty;var O=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var K=(t,a,r)=>a in t?xe(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,X=(t,a)=>{for(var r in a||(a={}))Z.call(a,r)&&K(t,r,a[r]);if(O)for(var r of O(a))q.call(a,r)&&K(t,r,a[r]);return t};var J=(t,a)=>{var r={};for(var n in t)Z.call(t,n)&&a.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&O)for(var n of O(t))a.indexOf(n)<0&&q.call(t,n)&&(r[n]=t[n]);return r};import{r as i,u as W,k as U,R as e,S as be,f as D,e as we}from"./vendor.576a7237.js";import{a0 as y,a9 as ve,aa as Ce,ac as ye,a2 as S,a1 as Se,ad as T,B as Q,k as M,g as ke,f,c as _,u as j,n as ee,H as d,V as p,C as k,T as m,h as te,aU as ae,aV as Te,a as b,M as je,x as re,m as Pe,q as ne,w as Ie,y as Ae,aW as Oe,A as P,N,aj as B,S as ze,O as le,aX as Le,P as Fe,D as Re,aY as We,j as Ue,aZ as De}from"./index.eb38a975.js";import{U as Me}from"./UserAvatar.cc1cbad6.js";import{C as I}from"./Card.d8b5307b.js";import{A as _e}from"./ArrowPrevIcon.918c1d7f.js";import{C as Ne}from"./react-easy-crop.604fc41e.js";import{a as Be,S as $e,s as He}from"./SliderBlue.8632ad69.js";import{B as se,C as Ge}from"./CatalogListWrap.67be80c3.js";import{T as E,c as Ye,t as oe}from"./TextSecondary.db4dfadc.js";import{B as Ve,C as Ze}from"./CarCardHeading.172c4c68.js";import{N as u}from"./NotSpecified.458fffcd.js";import{I as z}from"./image.0bf4e44d.js";import{A as L}from"./aspect-ratio.ca92bb55.js";import{S as qe}from"./simple-grid.4f5a6433.js";import{d as ce,O as Ke}from"./OrderListCard.f1344eda.js";import"./prop-types.d6ec705b.js";import"./react-redux.0b249e8a.js";import"./axios.7b768d2b.js";import"./formik.30c45d87.js";import"./yup.8a20e72b.js";import"./focus-visible.c4e3ef79.js";function w(){return w=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},w.apply(this,arguments)}function $(t,a){if(t==null)return{};var r={},n=Object.keys(t),s,l;for(l=0;l<n.length;l++)s=n[l],!(a.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Xe=y((t,a)=>{var r=ve("Table",t),n=Ce(t),{className:s}=n,l=$(n,["className"]);return i.exports.createElement(ye,{value:r},i.exports.createElement(S.table,w({role:"table",ref:a,__css:r.table,className:Se("chakra-table",s)},l)))}),Je=y((t,a)=>{var r=T();return i.exports.createElement(S.thead,w({},t,{ref:a,__css:r.thead}))}),Qe=y((t,a)=>{var r=T();return i.exports.createElement(S.tbody,w({},t,{ref:a,__css:r.tbody}))}),v=y((t,a)=>{var{isNumeric:r}=t,n=$(t,["isNumeric"]),s=T();return i.exports.createElement(S.th,w({},n,{ref:a,__css:s.th,"data-is-numeric":r}))}),ie=y((t,a)=>{var r=T();return i.exports.createElement(S.tr,w({role:"row"},t,{ref:a,__css:r.tr}))}),C=y((t,a)=>{var{isNumeric:r}=t,n=$(t,["isNumeric"]),s=T();return i.exports.createElement(S.td,w({role:"gridcell"},n,{ref:a,__css:s.td,"data-is-numeric":r}))});const H=c=>{var o=c,{activeBg:t="autoOrange.100",activeColor:a="#FB5607",to:r,clickCallback:n,children:s}=o,l=J(o,["activeBg","activeColor","to","clickCallback","children"]);const g=W(),h=U({path:r,exact:!0});return e.createElement(Q,X({w:"full",borderRadius:"none",display:"flex",justifyContent:["start",null,null,"center"],p:"32px 32px",fontWeight:"500",bg:h?t:"#fff",color:h?a:"#000",_hover:{bg:h?"autoOrange.200":"autoGrey.200"},_active:{bg:"autoOrange.300"},onClick:()=>{n?n():g.push(r)}},l),s)},et=({zoom:t,imageUrl:a,onCropComplete:r,onZoomChange:n})=>{const[s,l]=i.exports.useState({x:0,y:0});return e.createElement(Ne,{image:a,crop:s,zoom:t,cropShape:"round",aspect:1/1,onCropChange:l,onCropComplete:r,onZoomChange:n})},tt=({acceptedFileTypes:t,setFile:a,setFilePath:r,setIsEditing:n})=>{const s=i.exports.useRef(null),l=o=>{o.currentTarget.files&&(r(URL.createObjectURL(o.currentTarget.files[0])),a(o.currentTarget.files[0]),n(!0))},c=()=>{var o;console.log("clicked"),(o=s.current)==null||o.click()};return e.createElement(M,{onClick:c,h:"120%",cursor:"pointer"},e.createElement(ke,{bg:"tranparent",h:"full",w:"full"},"upload a file"),e.createElement("input",{type:"file",accept:t,ref:s,onChange:o=>l(o),style:{display:"none"}}))},at=({onChange:t,value:a,min:r,max:n,step:s})=>e.createElement(f,{w:"full",justify:"center"},e.createElement(se,{fontSize:"30px",_active:{bg:"autoGrey.200"},onClick:()=>{a>r&&t(Be(a,.1))}},"-"),e.createElement($e,{value:a,min:r,max:n,step:s,onChange:l=>t(l),w:"50%"}),e.createElement(se,{fontSize:"20px",_active:{bg:"autoGrey.200"},onClick:()=>{a<n&&t(He(a,.1))}},"+")),rt=t=>new Promise((a,r)=>{const n=new Image;n.addEventListener("load",()=>a(n)),n.addEventListener("error",s=>r(s)),n.setAttribute("crossOrigin","anonymous"),n.src=t});function nt(t){return t*Math.PI/180}async function lt(t,a,r=0){const n=await rt(t),s=document.createElement("canvas"),l=s.getContext("2d"),c=Math.max(n.width,n.height),o=2*(c/2*Math.sqrt(2));s.width=o,s.height=o,l==null||l.translate(o/2,o/2),l==null||l.rotate(nt(r)),l==null||l.translate(-o/2,-o/2),l==null||l.drawImage(n,o/2-n.width*.5,o/2-n.height*.5);const g=l==null?void 0:l.getImageData(0,0,o,o);return s.width=a.width,s.height=a.height,g&&(l==null||l.putImageData(g,Math.round(0-o/2+n.width*.5-a.x),Math.round(0-o/2+n.height*.5-a.y))),new Promise(h=>{s.toBlob(A=>{h(A)},"image/jpeg")})}const me=({toast:t,message:a})=>{t({title:a,status:"error",duration:2e3,isClosable:!0,position:"top"})},ue=({})=>{const[t,a]=i.exports.useState(1.3),[r,n]=i.exports.useState(null),[s,l]=i.exports.useState(null),[c,o]=i.exports.useState(""),[g,h]=i.exports.useState(!1),[A,pe]=i.exports.useState(null),[fe,F]=i.exports.useState(!1),G=_(),Y=j(),V=()=>{g?(h(!1),o("")):Y(ae())},de=x=>{a(x)},Ee=i.exports.useCallback((x,R)=>{n(R)},[]),ge=async()=>{const x=await lt(c,r);a(1),o(URL.createObjectURL(x)),h(!1),pe(x)},he=async()=>{const x=new FormData;A?(x.append("profile-avatar",A,"coppedImage.jpg"),F(!0),Y(Te(x)).unwrap().then(()=>{F(!1),V()}).catch(R=>{console.log("error: ",R),F(!1),me({toast:G,message:"Unable to save photo. Please, try later"})})):me({toast:G,message:"Please Choose the picture."})};return e.createElement(e.Fragment,null,e.createElement(f,{position:"absolute",left:"10px",top:"20px",spacing:"2"},e.createElement(ee,{position:"relative",top:"0",left:"0",as:_e,boxSize:6}),e.createElement(d,{fontSize:"20px"},"Profile Picture")),e.createElement(p,{w:"full",pt:"32px",spacing:"2"},e.createElement(k,{p:"8"},e.createElement(M,{h:"180px",w:"180px",borderRadius:"1000px",bg:"autoBlue.400",position:"relative",overflow:"hidden"},e.createElement(et,{imageUrl:c,zoom:t,onZoomChange:de,onCropComplete:Ee}))),g?e.createElement(e.Fragment,null,e.createElement(m,{fontSize:"16px"},"Scale and Crop"),e.createElement(at,{min:1,max:3,step:.1,value:t,onChange:a})):e.createElement(tt,{setFilePath:o,setFile:l,acceptedFileTypes:"image/*",setIsEditing:h}),e.createElement(f,{w:"full",pt:"24px"},e.createElement(te,{bg:"autoGrey.400",color:"black",_active:{bg:"autoGrey.600"},onClick:V},"Cancel"),e.createElement(te,{isLoading:fe,onClick:()=>{g?ge():he()}},g?"Crop":"Save"))))},st=({})=>{const{isChangeProfilePictureOpen:t,screen:a}=b(l=>l.globalAppState),{isDesktop:r}=a,n=j(),s=()=>n(ae());return e.createElement(e.Fragment,null,r?e.createElement(je,{isOpen:t,onClose:s,isCentered:!0,blockScrollOnMount:!0},e.createElement(re,null),e.createElement(Pe,{p:"32px 48px",w:"450px"},e.createElement(ee,{top:"30px",right:"48px"}),e.createElement(ue,null),e.createElement(ne,{p:"0"}))):e.createElement(Ie,{isOpen:t,placement:"bottom",onClose:s,size:"full"},e.createElement(re,null),e.createElement(Ae,{maxH:"100%"},e.createElement(ne,null,e.createElement(k,{h:"full"},e.createElement(p,{w:"full"},e.createElement(ue,null)))))))},ot=({})=>{const[t,a]=i.exports.useState(""),{path:r}=U(),n=j(),{avatar:s,fullName:l,phone:c}=b(o=>o.userInfoSlice);return i.exports.useEffect(()=>{s&&a(s)},[s]),e.createElement(I,{bg:"white",p:"0",w:["full",null,null,"200px"],maxH:"400px"},e.createElement(M,{p:"32px"},e.createElement(Me,{username:l,image:t,secondaryText:`+995 ${c}`,size:"70px",showPhotoChange:!0})),e.createElement(st,null),e.createElement(p,{pb:"24px",spacing:"0"},e.createElement(H,{to:`${r}/order-list`},"Order List"),e.createElement(H,{to:`${r}/favourites`},"Favourites"),e.createElement(H,{to:"/home",clickCallback:()=>n(Oe())},"Log out")))},ct=({car:t})=>{const a=W();return e.createElement(I,{bg:"autoGrey.500",w:"full",p:"0",cursor:"pointer",onClick:()=>a.push(`/catalog/car/${t.id}`)},e.createElement(f,{w:"full",justify:"space-between",p:"16px",align:"stretch"},e.createElement(f,{spacing:"4",minW:"220px",p:"0"},e.createElement(L,{ratio:78/66,minW:"78px"},e.createElement(z,{src:t==null?void 0:t.imgUrls[0],borderRadius:"8px",fallbackSrc:"https://via.placeholder.com/150"})),e.createElement(p,{align:"flex-start"},e.createElement(E,null,"Name"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.m?P(t.m):e.createElement(u,null)," ",t.mG?P(t.mG):e.createElement(u,{pl:"2",children:""})))),e.createElement(p,{align:"flex-start",w:"full",maxW:"80px",pt:"2"},e.createElement(E,null,"Year"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.y||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Damage"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.dmg?e.createElement(e.Fragment,null,P(t.dmg)):e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Location"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.lC||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(E,null,"Engine"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.eng||e.createElement(u,null))),e.createElement(Ve,{carId:t.id,h:"46px",w:"45px"})))},it=({})=>{const{favouriteCars:t}=b(r=>r.userInfoSlice),{favouriteCarsFetching:a}=b(r=>r.userInfoSlice);return e.createElement(I,{w:"full",p:"32px"},e.createElement(p,{w:"full",spacing:"4"},a?e.createElement(k,{w:"full",h:"300px"},e.createElement(N,null)):t.length?t.map(r=>e.createElement(ct,{key:r.id,car:r})):e.createElement(d,null,"Your Favourites list is empty")))},mt=({car:t})=>{const a=t.imgUrls,r=W();return e.createElement(I,{w:"full",p:"4",onClick:()=>r.push(`/catalog/car/${t.id}`)},e.createElement(p,{spacing:"4"},e.createElement(Ze,{model:`${t.m} ${t.mG}`,id:t.id,year:Number(t.y)}),e.createElement(qe,{gridTemplateAreas:'"a a b" "a a c"',w:"full",maxH:"130px",gap:"2"},e.createElement(L,{overflow:"hidden",borderRadius:"8px",ratio:191/130,w:"full",gridArea:"a",maxH:"130px"},e.createElement(z,{src:a[0]?a[0]:void 0,fallbackSrc:B,borderRadius:"8px"})),e.createElement(L,{ratio:191/130,w:"full",gridArea:"b",maxH:"61px"},e.createElement(z,{src:a[1]?a[1]:void 0,fallbackSrc:B,borderRadius:"8px"})),e.createElement(L,{ratio:191/130,w:"full",gridArea:"c",maxH:"61px"},e.createElement(z,{src:a[2]?a[2]:void 0,fallbackSrc:B,borderRadius:"8px"}))),e.createElement(p,{divider:e.createElement(ze,null),w:"full"},e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Damage"),e.createElement(d,null,t.dmg?Ye(t.dmg):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Mileage"),e.createElement(d,null,t.od?oe(t.od):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Location"),e.createElement(d,null,t.lC?P(t.lC):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Engine"),e.createElement(d,null,t.eng?P(t.eng.toString()):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Esimate Price"),e.createElement(d,null,t.price?e.createElement(e.Fragment,null,"$ ",oe(t.price)):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(E,null,"Total Price"),e.createElement(d,null,"$20 000")))))},ut=({})=>{const{favouriteCars:t}=b(a=>a.userInfoSlice);return e.createElement(Ge,{pt:"48px"},t.map(a=>e.createElement(mt,{key:a.id,car:a})))},pt=({})=>{const{isDesktop:t}=le(),a=j();return i.exports.useEffect(()=>{a(Le("")),a(Fe(""))},[]),e.createElement(e.Fragment,null,t?e.createElement(it,null):e.createElement(ut,null))},ft=({})=>e.createElement(pt,null),dt=({orderList:t})=>{const[a,r]=i.exports.useState([]),n=b(c=>c.orderedCars.fetching),s=_(),l=c=>{a.includes(c)?r(a.filter(o=>o!==c)):r(a.concat(c))};return e.createElement(I,{p:"32px",w:"full"},n?e.createElement(k,{w:"full",h:"full"},e.createElement(N,null)):t.length?e.createElement(Xe,null,e.createElement(Je,null,e.createElement(ie,{opacity:"0.5",fontSize:"14px",fontWeight:"light"},e.createElement(v,{p:[null,null,null,"2","4"],isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Order Id")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Name")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Created")),e.createElement(v,{isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Delivery Date")),e.createElement(v,{fontWeight:"light",p:[null,null,null,"2","4"]},e.createElement(m,{textTransform:"capitalize"},"Location")),e.createElement(v,{isTruncated:!0,p:"4",fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Total Price")),e.createElement(v,{fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Status")),e.createElement(v,{fontWeight:"light"}))),e.createElement(Qe,null,t.map((c,o)=>e.createElement(ie,{key:o,pt:"50px",_hover:{bg:"autoGrey.100"}},e.createElement(C,{w:"full",px:"4",title:c.id,py:[null,null,"8","8",""]},e.createElement(d,{w:"80px",isTruncated:!0,cursor:"pointer",onClick:()=>navigator.clipboard.writeText(c.id).then(()=>s({title:"Id copied to the clipboard",status:"success",position:"top"}))},c.id)),e.createElement(C,{title:c.carName,px:""},e.createElement(m,{noOfLines:a.includes(o)?10:1,fontSize:"16px",w:"100px"},c.carName)),e.createElement(C,{px:"2"},c.createdAt?ce(c.createdAt.toString()):e.createElement(u,null)),e.createElement(C,null,c.deliveryAt?ce(c.deliveryAt.toString()):e.createElement(u,null)," "),e.createElement(C,{p:[null,null,null,"2","4"]},c.location," "),e.createElement(C,{px:"4",title:`$ ${c.price}`},e.createElement(m,{fontSize:"inherit",maxW:"80px",isTruncated:!0},"$ ",c.price*1)),e.createElement(C,null,e.createElement(m,{whiteSpace:"nowrap"},c.status)," "),e.createElement(C,{p:"0"},e.createElement(Q,{variant:"link",minH:"50px",onClick:()=>l(o)},e.createElement(Re,{transform:a.includes(o)?"rotate(180deg)":"none",transition:"all .2s"}))))))):e.createElement(k,null,e.createElement(d,null,"Your order list is empty")))},Et=({orderList:t})=>{const a=b(r=>r.orderedCars.fetching);return e.createElement(p,{w:"full",spacing:"24px",pt:"48px"},a?e.createElement(k,null,e.createElement(N,null)):t.length?t.map((r,n)=>e.createElement(Ke,{key:n,order:r})):e.createElement(d,null,"Your order list is empty"))},gt=({})=>{const[t,a]=i.exports.useState([]),{isDesktop:r}=le(),n=b(c=>c.userInfoSlice.id),s=_(),l=j();return i.exports.useEffect(()=>{n&&l(We(n)).unwrap().then(c=>a(c)).catch(c=>s({title:c,status:"error",position:"top"}))},[n]),e.createElement(e.Fragment,null,r?e.createElement(dt,{orderList:t}):e.createElement(Et,{orderList:t}))},Mt=()=>{const{path:t}=U();return e.createElement(Ue,{pt:["16px","26px","32px","48px"]},e.createElement(De,{direction:["column",null,null,"row"],spacing:"24px",w:"full"},e.createElement(ot,null),e.createElement(be,null,e.createElement(D,{exact:!0,path:t,render:()=>e.createElement(we,{to:`${t}/order-list`})}),e.createElement(D,{exact:!0,path:`${t}/order-list`,render:()=>e.createElement(gt,null)}),e.createElement(D,{exact:!0,path:`${t}/favourites`,render:()=>e.createElement(ft,null)}))))};export{Mt as UserProfilePage,Mt as default};
