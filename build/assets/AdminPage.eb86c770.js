var oe=Object.defineProperty,le=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var z=(t,r,a)=>r in t?oe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,g=(t,r)=>{for(var a in r||(r={}))B.call(r,a)&&z(t,a,r[a]);if(k)for(var a of k(r))H.call(r,a)&&z(t,a,r[a]);return t},b=(t,r)=>le(t,se(r));var R=(t,r)=>{var a={};for(var o in t)B.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&k)for(var o of k(t))r.indexOf(o)<0&&H.call(t,o)&&(a[o]=t[o]);return a};import{r as v,R as e,k as ce,L as V,S as me,e as A,g as ie}from"./vendor.64e57edd.js";import{s as pe,bs as ue,G as de,bt as Ee,J as he,v as fe,t as ge,u as O,h as S,f as F,C as G,bu as be,ah as ye,bv as M,H as P,bw as u,bx as _,by as ve,a as j,aY as xe,T,B as $,aS as we,P as Se,Q as Ce,bz as ke,bA as Re,bB as q,bC as je,V as Y,ae as Te,af as Ae,U as W,aQ as Oe}from"./index.5cd7a341.js";import{F as Q,a as K,b as y}from"./formik.178388d5.js";import{T as J}from"./react-textarea-autosize.b1a14e4d.js";import{C as D}from"./Card.e0d357f7.js";import{T as Fe}from"./types.401d8b7f.js";import{H as Pe,c as We}from"./contants.49de9412.js";import{u as I,A as L}from"./use-toast.bb70c458.js";import{S as De,a as Ie}from"./SelectTrigger.617ed141.js";import{S as Le,a as Ue,b as Ne}from"./SelectWrapper.55c4c099.js";import{I as U}from"./image.7951cb6a.js";import"./prop-types.d6ec705b.js";import"./react-redux.d0311eef.js";import"./axios.7b768d2b.js";import"./focus-visible.85b77dad.js";function N(){return N=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},N.apply(this,arguments)}function Be(t,r){if(t==null)return{};var a={},o=Object.keys(t),m,l;for(l=0;l<o.length;l++)m=o[l],!(r.indexOf(m)>=0)&&(a[m]=t[m]);return a}var X=pe((t,r)=>{var a=ue("Textarea",t),o=de(t),{className:m,rows:l}=o,n=Be(o,["className","rows"]),p=Ee(n),s=["h","minH","height","minHeight"],c=l?he(a,s):a;return v.exports.createElement(fe.textarea,N({ref:r,rows:l},p,{className:ge("chakra-textarea",m),__css:c}))});const He=()=>{const t=Object.values(Fe),{addingDealerCar:r}=O(n=>n.carsReducer),{catalogQuery:a}=O(n=>n.globalAppState),o=S(),m=I(),l={manufacturer:"",modelGroup:"",modelDetail:"",bodyStyle:"",damage:"",location:"",odometer:0,cylinders:0,drive:"",engine:0,transmission:"",year:"",keys:"",fuelType:"",color:"",price:0,description:"",photos:null};return e.createElement(F,{pt:["32px",null,null,"40px"]},e.createElement(G,null,e.createElement(D,{w:"500px",bg:"#fff",p:"4"},e.createElement(Q,{initialValues:l,onSubmit:(n,{setFieldError:p})=>{const x=n,{photos:s,keys:c}=x,E=R(x,["photos","keys"]),i=new FormData;for(let f in E)i.append(f,n[f]);if(s)for(let f of s)i.append("photo[]",f);c&&i.append("keys",Pe.YES);const h=new URLSearchParams(a);o(be(i)).unwrap().then(()=>{o(ye(h)),m({title:"New car edded successfully",position:"top",status:"success",duration:1500})}).catch(f=>{let C="";M(f)&&f.status===422&&(C="Fill in required fields",p("manufacturer","required")),m({title:C,position:"top",variant:"solid",status:"error",duration:2e3})})}},({values:n,setFieldValue:p})=>e.createElement(K,null,e.createElement(P,null,"Add Car"),e.createElement(u,{name:"manufacturer",placeholder:"Manufacturer"}),e.createElement(u,{name:"modelGroup",placeholder:"Model group"}),e.createElement(u,{name:"modelDetail",placeholder:"Model detail"}),e.createElement(u,{name:"bodyStyle",placeholder:"Body style"}),e.createElement(u,{name:"damage",placeholder:"damage"}),e.createElement(u,{name:"location",placeholder:"location"}),e.createElement(u,{name:"odometer",placeholder:"odometer",type:"number",value:n.odometer||""}),e.createElement(u,{name:"cylinders",placeholder:"cylinders",type:"number",value:n.cylinders||""}),e.createElement(u,{name:"drive",placeholder:"drive"}),e.createElement(u,{name:"engine",type:"number",value:n.engine||"",placeholder:"Engine capacity"}),e.createElement(y,{name:"transmission"},({field:s})=>e.createElement(_,{pt:"2"},e.createElement(ve,b(g({},s),{bg:"#EAEAEB",opacity:"0.5",placeholder:"Transmission"}),t.map(c=>e.createElement("option",{key:c,value:c},c))))),e.createElement(u,{name:"year",placeholder:"Year",type:"number",value:n.year||""}),e.createElement(u,{name:"fuelType",placeholder:"Fuel type"}),e.createElement(u,{name:"color",placeholder:"Color"}),e.createElement(u,{name:"price",placeholder:"Price",type:"number",value:n.price||""}),e.createElement(y,{name:"keys"},({field:s})=>e.createElement(_,{pt:"2"},e.createElement(j,null,e.createElement(xe,g({colorScheme:"autoOrange",name:"kes"},s)),e.createElement(T,null,"Has keys")))),e.createElement(y,{name:"description"},({field:s})=>e.createElement(X,b(g({mt:"2"},s),{placeholder:"Write Description",size:"sm",as:J,maxRows:10}))),e.createElement(y,{name:"photos"},({field:s})=>e.createElement("input",b(g({type:"file"},s),{multiple:!0,value:void 0,onChange:c=>{const E=c.currentTarget.files;p("photos",E)}}))),e.createElement($,{type:"submit",mt:"4",mb:"4",isLoading:r},"Add"))))))},ze=o=>{var m=o,{onSelect:t,name:r}=m,a=R(m,["onSelect","name"]);const{isOpen:l,onToggle:n,onOpen:p,onClose:s}=we(),[c,E]=v.exports.useState(),[i,h]=v.exports.useState(""),[x,f]=v.exports.useState(""),[C,Z]=v.exports.useState([]),ee=S(),te=I(),ae=()=>{h(c?c.name:"Search for user...")},re=d=>{ee(ke(d)).unwrap().then(w=>{Z(w)}).catch(()=>te({title:"Could not fetch users",position:"top",status:"error",duration:2e3}))},ne=C.filter(d=>d.name.toLocaleLowerCase().includes(x.toLocaleLowerCase()));return e.createElement(Le,g({areOptionsOpen:l},a),e.createElement(Se,{onClick:s,isActive:l}),e.createElement(Ue,null,e.createElement(De,{areOptionsOpen:l,areOptionsSelected:!!c,clearCb:()=>{E(void 0)}},e.createElement(Ie,{autoComplete:"off",bg:"autoGrey.200",name:r||"",label:"Search for user...",placeholder:i,value:c?We(c.name):x,onChange:d=>{const w=d.currentTarget.value;re(w),f(w),E(void 0),w&&p()},onFocus:()=>{ae()}})),e.createElement(Ne,{isOpen:l},ne.map(d=>e.createElement(Ce,{h:"80px",onClick:()=>{h(d.name),n(),t(d.id),E(d)},key:d.id},e.createElement(j,{w:"full"},e.createElement(L,{ratio:1/1,w:"50px"},e.createElement(U,{w:"full",h:"full",src:d.avatar,fallbackSrc:"https://image.shutterstock.com/image-vector/profile-picture-avatar-icon-vector-260nw-1760295569.jpg",borderRadius:"100px"})),e.createElement(P,null,d.name)))))))},Ve=({})=>{const t=S(),r=I(),a={text:"",userId:"",photos:null},o=l=>{let n="";return l?l.length!==24&&(n="Invalid length"):n="Required",n},m=l=>{let n="";return l&&l.length>4&&(n="Photos must be less then 4"),n};return e.createElement(Q,{initialValues:a,onSubmit:(l,{setErrors:n})=>{const E=l,{photos:p}=E,s=R(E,["photos"]),c=new FormData;if(p)for(let i of p)c.append("photo[]",i);for(let[i,h]of Object.entries(s))c.append(i,h);t(Re(c)).unwrap().then(()=>{t(q()),r({title:"New Review added",duration:2e3,status:"success",position:"top"})}).catch(i=>{var h;M(i)&&i.status===422&&((h=i.errors)==null?void 0:h.length)&&n(je(i.errors))})}},({setFieldValue:l})=>e.createElement(K,null,e.createElement(P,{pb:"4"},"Add new Review"),e.createElement(y,{name:"userId",validate:o},({field:n,form:p})=>e.createElement(e.Fragment,null,e.createElement(ze,b(g({},n),{name:"userId",onSelect:s=>{l("userId",s)}})),e.createElement(T,{as:"span",color:"red"},p.errors.userId))),e.createElement(y,{name:"text"},({field:n})=>e.createElement(X,b(g({mt:"2"},n),{placeholder:"Write Description",size:"sm",as:J,maxRows:10}))),e.createElement(y,{name:"photos",validate:m},({field:n,form:p})=>e.createElement(e.Fragment,null,e.createElement("input",b(g({},n),{type:"file",multiple:!0,value:void 0,onChange:s=>{l("photos",s.currentTarget.files)}})),e.createElement(T,{as:"span",display:"block",color:"red"},p.errors.photos))),e.createElement($,{type:"submit",mt:"4"},"Add Review")))},Ge=({})=>{const{reviews:t}=O(a=>a.customers),r=S();return v.exports.useEffect(()=>{r(q())},[]),e.createElement(F,{pt:["32px",null,null,"40px"]},e.createElement(G,null,e.createElement(Y,{spacing:"32px"},e.createElement(D,{maxW:"500px",p:"4"},e.createElement(Ve,null)),e.createElement(D,{w:"full",maxW:"500px"},e.createElement(Y,{w:"full"},t.length?t.map((a,o)=>e.createElement(j,{key:o,bg:"autoGrey.200",w:"full",p:"4",borderRadius:"8"},e.createElement(Te,{icon:e.createElement(Ae,null),"aria-label":"remove review"}),e.createElement(L,{ratio:1/1,minW:"80px"},e.createElement(U,{src:a.user&&a.user.avatar,fallbackSrc:"https://image.shutterstock.com/image-vector/profile-picture-avatar-icon-vector-260nw-1760295569.jpg",borderRadius:"100px"})),e.createElement(T,{overflowWrap:"anywhere"},a.text),a.photos&&a.photos.map(m=>e.createElement(L,{key:m,ratio:1/1,minW:"60px"},e.createElement(U,{src:m}))))):e.createElement(e.Fragment,null,"No Review Yet"))))))},lt=()=>{const{path:t}=ce(),r=S();return e.createElement(F,null,e.createElement(j,{w:"full",justify:"center",pt:"4"},e.createElement(W,{border:"1px solid"},e.createElement(V,{to:`${t}/add-car`},"add new car")),e.createElement(W,{border:"1px solid"},e.createElement(V,{to:`${t}/add-review`},"add new Review")),e.createElement(W,{color:"red",border:"1px solid",onClick:()=>r(Oe())},"logout")),e.createElement(me,null,e.createElement(A,{path:t,exact:!0},e.createElement(ie,{to:`${t}/add-review`})),e.createElement(A,{path:`${t}/add-car`,render:()=>e.createElement(He,null),exact:!0}),e.createElement(A,{path:`${t}/add-review`,render:()=>e.createElement(Ge,null),exact:!0})))};export{lt as AdminPage,lt as default};
