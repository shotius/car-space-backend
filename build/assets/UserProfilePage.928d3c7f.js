var fe=Object.defineProperty;var k=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var G=(t,l,a)=>l in t?fe(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,V=(t,l)=>{for(var a in l||(l={}))W.call(l,a)&&G(t,a,l[a]);if(k)for(var a of k(l))H.call(l,a)&&G(t,a,l[a]);return t};var Y=(t,l)=>{var a={};for(var n in t)W.call(t,n)&&l.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&k)for(var n of k(t))l.indexOf(n)<0&&H.call(t,n)&&(a[n]=t[n]);return a};import{r as m,u as L,f as N,R as e,S as ge,b as z,d as he}from"./vendor.506dd9e8.js";import{T as xe,H as i,M as Z,a as c,V as p,C as M,b as q,B as K,c as we,d as J,e as be,f as Q,D as Ce,g as ye,h as u,i as C,S as X,u as ee,j as ve,k as Se,I as De,P as je,l as Pe,m as ke}from"./PublicLayout.69ee19e4.js";import{U as Ie}from"./UserAvatar.b2a6b7f8.js";import{C as y,S as Te}from"./Card.3a6b92ef.js";import{B as U}from"./button.c3901463.js";import{A as Ae}from"./ArrowPrevIcon.99ca4c8a.js";import{C as Fe}from"./react-easy-crop.03971dcd.js";import{f as v,u as Oe,o as Re,S as Le,c as S,a as Ne,b as D,B as I,d as T,t as te,e as A,l as ze,g as Me,h as Ue}from"./index.ce29a962.js";import{B as le,C as _e}from"./CatalogListWrap.19eb5635.js";import{S as Be,D as $e}from"./DamnCard.859b3416.js";import{B as We,C as He,c as Ge,t as _,D as ae,a as j}from"./DropdownIcon.d77763e6.js";import{N as f}from"./NotSpecified.87c86fb3.js";import{A as F}from"./aspect-ratio.1e6791cf.js";import{I as O}from"./image.bfb47504.js";import"./prop-types.d6ec705b.js";import"./formik.b6109983.js";import"./react-redux.84e4588f.js";import"./axios.7b768d2b.js";import"./focus-visible.064b564c.js";function h(){return h=Object.assign||function(t){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},h.apply(this,arguments)}function B(t,l){if(t==null)return{};var a={},n=Object.keys(t),r,s;for(s=0;s<n.length;s++)r=n[s],!(l.indexOf(r)>=0)&&(a[r]=t[r]);return a}var Ve=v((t,l)=>{var a=Oe("Table",t),n=Re(t),{className:r}=n,s=B(n,["className"]);return m.exports.createElement(Le,{value:a},m.exports.createElement(S.table,h({role:"table",ref:l,__css:a.table,className:Ne("chakra-table",r)},s)))}),Ye=v((t,l)=>{var a=D();return m.exports.createElement(S.thead,h({},t,{ref:l,__css:a.thead}))}),Ze=v((t,l)=>{var a=D();return m.exports.createElement(S.tbody,h({},t,{ref:l,__css:a.tbody}))}),x=v((t,l)=>{var{isNumeric:a}=t,n=B(t,["isNumeric"]),r=D();return m.exports.createElement(S.th,h({},n,{ref:l,__css:r.th,"data-is-numeric":a}))}),ne=v((t,l)=>{var a=D();return m.exports.createElement(S.tr,h({role:"row"},t,{ref:l,__css:a.tr}))}),w=v((t,l)=>{var{isNumeric:a}=t,n=B(t,["isNumeric"]),r=D();return m.exports.createElement(S.td,h({role:"gridcell"},n,{ref:l,__css:r.td,"data-is-numeric":a}))});const $=b=>{var o=b,{activeBg:t="autoOrange.100",activeColor:l="#FB5607",to:a,clickCallback:n,children:r}=o,s=Y(o,["activeBg","activeColor","to","clickCallback","children"]);const E=L(),d=N({path:a,exact:!0});return e.createElement(U,V({w:"full",borderRadius:"none",display:"flex",justifyContent:["start",null,null,"center"],p:"32px 32px",bg:d?t:"#fff",color:d?l:"#000",_hover:{bg:d?"autoOrange.200":"autoGrey.200"},_active:{bg:"autoOrange.300"},onClick:()=>{n?n():E.push(a)}},s),r)},qe=({zoom:t,imageUrl:l,onCropComplete:a,onZoomChange:n})=>{const[r,s]=m.exports.useState({x:0,y:0});return e.createElement(Fe,{image:l,crop:r,zoom:t,cropShape:"round",aspect:1/1,onCropChange:s,onCropComplete:a,onZoomChange:n})},Ke=({acceptedFileTypes:t,setFile:l,setFilePath:a,setIsEditing:n})=>{const r=m.exports.useRef(null),s=o=>{o.currentTarget.files&&(a(URL.createObjectURL(o.currentTarget.files[0])),l(o.currentTarget.files[0]),n(!0))},b=()=>{var o;console.log("clicked"),(o=r.current)==null||o.click()};return e.createElement(I,{onClick:b,h:"120%",cursor:"pointer"},e.createElement(xe,{bg:"tranparent",h:"full",w:"full"},"upload a file"),e.createElement("input",{type:"file",accept:t,ref:r,onChange:o=>s(o),style:{display:"none"}}))},re=t=>t.toString().split(".")[1].length,Je=(t,l)=>{const a=re(l)*10;return(t*a-l*a)/a},Qe=(t,l)=>{const a=re(l)*10;return(t*a+l*a)/a},Xe=({onChange:t,value:l,min:a,max:n,step:r})=>e.createElement(i,{w:"full",justify:"center"},e.createElement(le,{fontSize:"30px",_active:{bg:"autoGrey.200"},onClick:()=>{l>a&&t(Je(l,.1))}},"-"),e.createElement(Be,{value:l,min:a,max:n,step:r,onChange:s=>t(s),w:"50%"}),e.createElement(le,{fontSize:"20px",_active:{bg:"autoGrey.200"},onClick:()=>{l<n&&t(Qe(l,.1))}},"+")),et=t=>new Promise((l,a)=>{const n=new Image;n.addEventListener("load",()=>l(n)),n.addEventListener("error",r=>a(r)),n.setAttribute("crossOrigin","anonymous"),n.src=t});function tt(t){return t*Math.PI/180}async function lt(t,l,a=0){const n=await et(t),r=document.createElement("canvas"),s=r.getContext("2d"),b=Math.max(n.width,n.height),o=2*(b/2*Math.sqrt(2));r.width=o,r.height=o,s==null||s.translate(o/2,o/2),s==null||s.rotate(tt(a)),s==null||s.translate(-o/2,-o/2),s==null||s.drawImage(n,o/2-n.width*.5,o/2-n.height*.5);const E=s==null?void 0:s.getImageData(0,0,o,o);return r.width=l.width,r.height=l.height,E&&(s==null||s.putImageData(E,Math.round(0-o/2+n.width*.5-l.x),Math.round(0-o/2+n.height*.5-l.y))),new Promise(d=>{r.toBlob(P=>{d(P)},"image/jpeg")})}const se=({})=>{const[t,l]=m.exports.useState(1.3),[a,n]=m.exports.useState(null),[r,s]=m.exports.useState(null),[b,o]=m.exports.useState(""),[E,d]=m.exports.useState(!1),[P,oe]=m.exports.useState(null);console.log("file: ",r);const ce=T(),ie=()=>{E?(d(!1),o("")):ce(te())},me=g=>{l(g)},ue=m.exports.useCallback((g,de)=>{n(de)},[]),pe=async()=>{const g=await lt(b,a);l(1),o(URL.createObjectURL(g)),d(!1),oe(g)},Ee=()=>{const g=new FormData;if(P)g.append("profileImage",P,"coppedImage.jpg"),console.log("fomrdata",g.get("profileImage"));else throw new Error("cropped Image is null")};return e.createElement(e.Fragment,null,e.createElement(i,{position:"absolute",left:"10px",top:"20px",spacing:"2"},e.createElement(Z,{position:"relative",top:"0",left:"0",as:Ae,boxSize:6}),e.createElement(c,{fontSize:"20px"},"Profile Picture")),e.createElement(p,{w:"full",pt:"32px",spacing:"2"},e.createElement(M,{p:"8"},e.createElement(I,{h:"180px",w:"180px",borderRadius:"1000px",bg:"autoBlue.400",position:"relative",overflow:"hidden"},e.createElement(qe,{imageUrl:b,zoom:t,onZoomChange:me,onCropComplete:ue}))),E?e.createElement(e.Fragment,null,e.createElement(q,{fontSize:"16px"},"Scale and Crop"),e.createElement(Xe,{min:1,max:3,step:.1,value:t,onChange:l})):e.createElement(Ke,{setFilePath:o,setFile:s,acceptedFileTypes:"image/*",setIsEditing:d}),e.createElement(i,{w:"full",pt:"24px"},e.createElement(K,{bg:"autoGrey.400",color:"black",_active:{bg:"autoGrey.600"},onClick:ie},"Cancel"),e.createElement(K,{onClick:()=>{E?pe():Ee()}},E?"Crop":"Save"))))},at=({})=>{const{isChangeProfilePictureOpen:t,screen:l}=A(s=>s.globalAppState),{isDesktop:a}=l,n=T(),r=()=>n(te());return e.createElement(e.Fragment,null,a?e.createElement(we,{isOpen:t,onClose:r,isCentered:!0,blockScrollOnMount:!0},e.createElement(J,null),e.createElement(be,{p:"32px 48px",w:"450px"},e.createElement(Z,{top:"30px",right:"48px"}),e.createElement(se,null),e.createElement(Q,{p:"0"}))):e.createElement(Ce,{isOpen:t,placement:"bottom",onClose:r,size:"full"},e.createElement(J,null),e.createElement(ye,{maxH:"100%"},e.createElement(Q,null,e.createElement(M,{h:"full"},e.createElement(p,{w:"full"},e.createElement(se,null)))))))},nt=({})=>{const{path:t}=N(),l=T();return e.createElement(y,{bg:"white",p:"0",w:["full",null,null,"200px"],maxH:"400px"},e.createElement(I,{p:"32px"},e.createElement(Ie,{mainText:"Full Name",secondaryText:"+995 123123 123",size:"70px"})),e.createElement(at,null),e.createElement(p,{pb:"24px",spacing:"0"},e.createElement($,{to:`${t}/order-list`},"Order List"),e.createElement($,{to:`${t}/favourites`},"Favourites"),e.createElement($,{to:"/home",clickCallback:()=>l(ze())},"Log out")))},rt=({car:t})=>{const l=L();return e.createElement(y,{bg:"autoGrey.500",w:"full",p:"0",cursor:"pointer",onClick:()=>l.push(`/catalog/car/${t==null?void 0:t.lN}`)},e.createElement(i,{w:"full",justify:"space-between",p:"16px"},e.createElement(i,{spacing:"4",minW:"220px"},e.createElement(F,{ratio:78/66,minW:"78px"},e.createElement(O,{src:`https://${t==null?void 0:t.imgT}`,borderRadius:"8px"})),e.createElement(p,{align:"flex-start"},e.createElement(u,null,"Name"),e.createElement(c,{fontSize:"16px"},C(t.m)," ",C(t.mG)))),e.createElement(p,{align:"flex-start",w:"full",maxW:"80px"},e.createElement(u,null,"Year"),e.createElement(c,{fontSize:"16px"},t.y?e.createElement(e.Fragment,null,C(t.y)):e.createElement(f,null))),e.createElement(p,{align:"flex-start",w:"full"},e.createElement(u,null,"Damage"),e.createElement(c,{fontSize:"16px"},t.dmg?e.createElement(e.Fragment,null,C(t.dmg)):e.createElement(f,null))),e.createElement(p,{align:"flex-start",w:"full"},e.createElement(u,null,"Location"),e.createElement(c,{fontSize:"16px"},t.lC?e.createElement(e.Fragment,null,C(t.lC)):e.createElement(f,null))),e.createElement(p,{align:"flex-start",w:"full"},e.createElement(u,null,"Engine"),e.createElement(c,{fontSize:"16px"},t.eng||e.createElement(f,null))),e.createElement(We,{lotNumber:t.lN,h:"46px",w:"45px"})))},st=({})=>{const{favouriteCars:t}=A(a=>a.userInfoSlice),{favouriteCarsFetching:l}=A(a=>a.userInfoSlice);return e.createElement(y,{w:"full",p:"32px"},e.createElement(p,{w:"full",spacing:"4"},l?e.createElement(c,null,"...loading"):t.map(a=>e.createElement(rt,{key:a.lN,car:a}))))},ot=({car:t})=>{const l=t.imgsM,a=L();return e.createElement(y,{w:"full",p:"4",onClick:()=>a.push(`/catalog/car/${t==null?void 0:t.lN}`)},e.createElement(p,{spacing:"4"},e.createElement(He,{car:$e,lotNumber:"39029881"}),e.createElement(Te,{gridTemplateAreas:'"a a b" "a a c"',w:"full",maxH:"130px",gap:"2"},e.createElement(F,{overflow:"hidden",borderRadius:"8px",ratio:191/130,w:"full",gridArea:"a",maxH:"130px"},e.createElement(O,{src:l&&l.length?l[0]:`https://${t==null?void 0:t.imgT}`,filter:"auto",blur:l&&l.length?"none":"10px",saturation:.9,borderRadius:"8px"})),e.createElement(F,{ratio:191/130,w:"full",gridArea:"b",maxH:"61px"},e.createElement(O,{src:l&&l.length?l[1]:`https://${t==null?void 0:t.imgT}`,borderRadius:"8px"})),e.createElement(F,{ratio:191/130,w:"full",gridArea:"c",maxH:"61px"},e.createElement(O,{src:l&&l.length?l[2]:`https://${t==null?void 0:t.imgT}`,borderRadius:"8px"}))),e.createElement(p,{divider:e.createElement(X,null),w:"full"},e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Damage"),e.createElement(c,null,t.dmg?Ge(t.dmg):e.createElement(f,null))),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Mileage"),e.createElement(c,null,t.od?_(parseInt(t.od)):e.createElement(f,null))),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Location"),e.createElement(c,null,t.lC?C(t.lC):e.createElement(f,null))),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Engine"),e.createElement(c,null,t.eng?C(t.eng):e.createElement(f,null))),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Esimate Price"),e.createElement(c,null,t.eRV?e.createElement(e.Fragment,null,"$ ",_(parseInt(t.eRV))):e.createElement(f,null))),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Total Price"),e.createElement(c,null,"$20 000")))))},ct=({})=>{const{favouriteCars:t}=A(l=>l.userInfoSlice);return e.createElement(_e,{pt:"48px"},t.map(l=>e.createElement(ot,{key:l.lN,car:l})))},it=({})=>{const{isDesktop:t}=ee(),l=T();return m.exports.useEffect(()=>{l(Me()),l(Ue())},[]),e.createElement(e.Fragment,null,t?e.createElement(st,null):e.createElement(ct,null))},mt=({})=>e.createElement(it,null),R=t=>{const l=t.getDate(),a=t.getMonth()+1,n=t.getFullYear();return`${l<=9?"0"+l:l}.${a<=9?"0"+a:a}.${n}`},ut=({orderList:t})=>{const[l,a]=m.exports.useState([]),n=r=>{l.includes(r)?a(l.filter(s=>s!==r)):a(l.concat(r))};return e.createElement(y,{p:"32px",w:"full"},t.length?e.createElement(Ve,null,e.createElement(Ye,null,e.createElement(ne,{opacity:"0.5",fontSize:"14px",fontWeight:"light"},e.createElement(x,{p:[null,null,null,"2","4"],isTruncated:!0,fontWeight:"light"},"Order Id"),e.createElement(x,{fontWeight:"light"},"Name"),e.createElement(x,{fontWeight:"light"},"Created"),e.createElement(x,{isTruncated:!0,fontWeight:"light"},"Delivery Date"),e.createElement(x,{fontWeight:"light",p:[null,null,null,"2","4"]},"Location"),e.createElement(x,{isTruncated:!0,p:"4",fontWeight:"light"},"Total Price"),e.createElement(x,{fontWeight:"light"},"Status"),e.createElement(x,{fontWeight:"light"}))),e.createElement(Ze,null,t.map((r,s)=>e.createElement(ne,{key:s,pt:"50px"},e.createElement(w,{w:"full",p:[null,null,null,"2","8"],isTruncated:!0},e.createElement(c,null,r.orderId)),e.createElement(w,{max:!0},e.createElement(q,{noOfLines:l.includes(s)?5:1,fontSize:"16px"},r.name)),e.createElement(w,null,R(r.createdDate)," "),e.createElement(w,null,R(r.deliveryDate)," "),e.createElement(w,{p:[null,null,null,"2","4"]},r.location," "),e.createElement(w,null," $ ",r.totalPrice),e.createElement(w,null,r.status," "),e.createElement(w,{p:"0"},e.createElement(U,{variant:"link",onClick:()=>n(s),minH:"50px"},e.createElement(ae,{transform:l.includes(s)?"rotate(180deg)":"none",transition:"all .2s"}))))))):e.createElement(M,null,e.createElement(c,null,"Order list is empty")))},pt=({order:t})=>{const{createdDate:l,deliveryDate:a}=t,{isOpen:n,onToggle:r}=ve();return e.createElement(y,{w:"full",pb:"0"},e.createElement(p,{w:"full",p:"2"},e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Order Id"),e.createElement(c,null,t.orderId)),e.createElement(j,{w:"full"}),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Name"),e.createElement(c,null,t.name)),e.createElement(j,{w:"full"}),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Created"),e.createElement(c,null,R(l))),e.createElement(j,{w:"full"}),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Dealivery"),e.createElement(c,null,R(a))),e.createElement(j,{w:"full"}),e.createElement(I,{w:"full"},e.createElement(Se,{in:n},e.createElement(p,{divider:e.createElement(X,null)},e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Location"),e.createElement(c,null,t.location)),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Total Price"),e.createElement(c,null,_(t.totalPrice)," USD")),e.createElement(i,{w:"full",justify:"space-between"},e.createElement(u,null,"Status"),e.createElement(c,null,t.status))))),e.createElement(j,{w:"full",display:n?"block":"none"}),e.createElement(i,null,e.createElement(U,{variant:"ghost",bg:"transparent",onClick:r},n?"See less":"See more",e.createElement(De,{as:ae,transform:n?"rotate(-180deg)":"rotate(-90deg)",mb:"2px",ml:"2",transition:"all .2s"})))))},Et=({orderList:t})=>e.createElement(p,{w:"full",spacing:"24px",pt:"48px"},t.map((l,a)=>e.createElement(pt,{key:a,order:l}))),dt=({})=>{const t=[{orderId:123123,name:"Chevrolet Cruze",createdDate:new Date,deliveryDate:new Date(2021,12,12),location:"USA",totalPrice:2e4,status:"Completed"},{orderId:123123,name:"Chevrolet Cruze Chevrolet",createdDate:new Date,deliveryDate:new Date(2021,12,12),location:"USA",totalPrice:2e4,status:"Completed"},{orderId:123123,name:"Chevrolet Cruze",createdDate:new Date,deliveryDate:new Date(2021,12,12),location:"USA",totalPrice:2e4,status:"Completed"},{orderId:123123,name:"Chevrolet Cruze",createdDate:new Date,deliveryDate:new Date(2021,12,12),location:"USA",totalPrice:2e4,status:"Completed"},{orderId:123123,name:"Chevrolet Cruze",createdDate:new Date,deliveryDate:new Date(2021,12,12),location:"USA",totalPrice:2e4,status:"Completed"}],{isDesktop:l}=ee();return e.createElement(e.Fragment,null,l?e.createElement(ut,{orderList:t}):e.createElement(Et,{orderList:t}))},Lt=()=>{const{path:t}=N();return e.createElement(je,null,e.createElement(Pe,{pt:["16px","26px","32px","48px"]},e.createElement(ke,{direction:["column",null,null,"row"],spacing:"24px",w:"full"},e.createElement(nt,null),e.createElement(ge,null,e.createElement(z,{exact:!0,path:t,render:()=>e.createElement(he,{to:`${t}/order-list`})}),e.createElement(z,{exact:!0,path:`${t}/order-list`,render:()=>e.createElement(dt,null)}),e.createElement(z,{exact:!0,path:`${t}/favourites`,render:()=>e.createElement(mt,null)})))))};export{Lt as UserProfilePage,Lt as default};
