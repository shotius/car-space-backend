var xe=Object.defineProperty;var O=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var Z=(t,a,r)=>a in t?xe(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,J=(t,a)=>{for(var r in a||(a={}))q.call(a,r)&&Z(t,r,a[r]);if(O)for(var r of O(a))K.call(a,r)&&Z(t,r,a[r]);return t};var Q=(t,a)=>{var r={};for(var l in t)q.call(t,l)&&a.indexOf(l)<0&&(r[l]=t[l]);if(t!=null&&O)for(var l of O(t))a.indexOf(l)<0&&K.call(t,l)&&(r[l]=t[l]);return r};import{r as i,u as W,k as D,R as e,S as be,f as M,e as we}from"./vendor.576a7237.js";import{a0 as S,a9 as ve,aa as Ce,ac as Se,a2 as y,a1 as ye,ad as k,B as X,k as U,g as Te,f,c as _,u as j,n as ee,H as E,V as p,C as T,T as m,h as te,b4 as ae,b5 as ke,a as b,M as je,x as re,m as Pe,q as le,w as Ie,y as Ae,b6 as Oe,A as P,N,aj as B,S as ze,O as ne,b7 as Le,P as Fe,D as Re,b8 as We,j as De,b9 as Me}from"./index.3b7ee551.js";import{S as Ue}from"./ScrollToTop.da3f839a.js";import{U as _e}from"./UserAvatar.b9e46438.js";import{C as I}from"./Card.2f059099.js";import{A as Ne}from"./ArrowPrevIcon.e62d8fb7.js";import{C as Be}from"./react-easy-crop.604fc41e.js";import{a as $e,S as He,s as Ge}from"./SliderBlue.48a3ff51.js";import{a as se,B as Ye,C as Ve}from"./ButtonRound.737bb391.js";import{T as d,c as qe,t as oe}from"./TextSecondary.79a6ed72.js";import{N as u}from"./NotSpecified.3eb7846a.js";import{I as z}from"./image.9541a6b9.js";import{A as L}from"./aspect-ratio.1ef56b66.js";import{C as Ke}from"./CatalogListWrap.7151a2ee.js";import{S as Ze}from"./simple-grid.1f457a66.js";import{d as ce,O as Je}from"./OrderListCard.a6ea4a29.js";import"./prop-types.d6ec705b.js";import"./react-redux.0b249e8a.js";import"./axios.7b768d2b.js";import"./formik.30c45d87.js";import"./yup.8a20e72b.js";import"./focus-visible.c4e3ef79.js";function w(){return w=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},w.apply(this,arguments)}function $(t,a){if(t==null)return{};var r={},l=Object.keys(t),s,n;for(n=0;n<l.length;n++)s=l[n],!(a.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Qe=S((t,a)=>{var r=ve("Table",t),l=Ce(t),{className:s}=l,n=$(l,["className"]);return i.exports.createElement(Se,{value:r},i.exports.createElement(y.table,w({role:"table",ref:a,__css:r.table,className:ye("chakra-table",s)},n)))}),Xe=S((t,a)=>{var r=k();return i.exports.createElement(y.thead,w({},t,{ref:a,__css:r.thead}))}),et=S((t,a)=>{var r=k();return i.exports.createElement(y.tbody,w({},t,{ref:a,__css:r.tbody}))}),v=S((t,a)=>{var{isNumeric:r}=t,l=$(t,["isNumeric"]),s=k();return i.exports.createElement(y.th,w({},l,{ref:a,__css:s.th,"data-is-numeric":r}))}),ie=S((t,a)=>{var r=k();return i.exports.createElement(y.tr,w({role:"row"},t,{ref:a,__css:r.tr}))}),C=S((t,a)=>{var{isNumeric:r}=t,l=$(t,["isNumeric"]),s=k();return i.exports.createElement(y.td,w({role:"gridcell"},l,{ref:a,__css:s.td,"data-is-numeric":r}))});const H=c=>{var o=c,{activeBg:t="autoOrange.100",activeColor:a="#FB5607",to:r,clickCallback:l,children:s}=o,n=Q(o,["activeBg","activeColor","to","clickCallback","children"]);const g=W(),h=D({path:r,exact:!0});return e.createElement(X,J({w:"full",borderRadius:"none",display:"flex",justifyContent:["start",null,null,"center"],p:"32px 32px",fontWeight:"500",bg:h?t:"#fff",color:h?a:"#000",_hover:{bg:h?"autoOrange.200":"autoGrey.200"},_active:{bg:"autoOrange.300"},onClick:()=>{l?l():g.push(r)}},n),s)},tt=({zoom:t,imageUrl:a,onCropComplete:r,onZoomChange:l})=>{const[s,n]=i.exports.useState({x:0,y:0});return e.createElement(Be,{image:a,crop:s,zoom:t,cropShape:"round",aspect:1/1,onCropChange:n,onCropComplete:r,onZoomChange:l})},at=({acceptedFileTypes:t,setFile:a,setFilePath:r,setIsEditing:l})=>{const s=i.exports.useRef(null),n=o=>{o.currentTarget.files&&(r(URL.createObjectURL(o.currentTarget.files[0])),a(o.currentTarget.files[0]),l(!0))},c=()=>{var o;console.log("clicked"),(o=s.current)==null||o.click()};return e.createElement(U,{onClick:c,h:"120%",cursor:"pointer"},e.createElement(Te,{bg:"tranparent",h:"full",w:"full"},"upload a file"),e.createElement("input",{type:"file",accept:t,ref:s,onChange:o=>n(o),style:{display:"none"}}))},rt=({onChange:t,value:a,min:r,max:l,step:s})=>e.createElement(f,{w:"full",justify:"center"},e.createElement(se,{fontSize:"30px",_active:{bg:"autoGrey.200"},onClick:()=>{a>r&&t($e(a,.1))}},"-"),e.createElement(He,{sliderValue:a,value:a,min:r,max:l,step:s,onChange:n=>t(n),w:"50%"}),e.createElement(se,{fontSize:"20px",_active:{bg:"autoGrey.200"},onClick:()=>{a<l&&t(Ge(a,.1))}},"+")),lt=t=>new Promise((a,r)=>{const l=new Image;l.addEventListener("load",()=>a(l)),l.addEventListener("error",s=>r(s)),l.setAttribute("crossOrigin","anonymous"),l.src=t});function nt(t){return t*Math.PI/180}async function st(t,a,r=0){const l=await lt(t),s=document.createElement("canvas"),n=s.getContext("2d"),c=Math.max(l.width,l.height),o=2*(c/2*Math.sqrt(2));s.width=o,s.height=o,n==null||n.translate(o/2,o/2),n==null||n.rotate(nt(r)),n==null||n.translate(-o/2,-o/2),n==null||n.drawImage(l,o/2-l.width*.5,o/2-l.height*.5);const g=n==null?void 0:n.getImageData(0,0,o,o);return s.width=a.width,s.height=a.height,g&&(n==null||n.putImageData(g,Math.round(0-o/2+l.width*.5-a.x),Math.round(0-o/2+l.height*.5-a.y))),new Promise(h=>{s.toBlob(A=>{h(A)},"image/jpeg")})}const me=({toast:t,message:a})=>{t({title:a,status:"error",duration:2e3,isClosable:!0,position:"top"})},ue=({})=>{const[t,a]=i.exports.useState(1.3),[r,l]=i.exports.useState(null),[s,n]=i.exports.useState(null),[c,o]=i.exports.useState(""),[g,h]=i.exports.useState(!1),[A,pe]=i.exports.useState(null),[fe,F]=i.exports.useState(!1),G=_(),Y=j(),V=()=>{g?(h(!1),o("")):Y(ae())},Ee=x=>{a(x)},de=i.exports.useCallback((x,R)=>{l(R)},[]),ge=async()=>{const x=await st(c,r);a(1),o(URL.createObjectURL(x)),h(!1),pe(x)},he=async()=>{const x=new FormData;A?(x.append("profile-avatar",A,"coppedImage.jpg"),F(!0),Y(ke(x)).unwrap().then(()=>{F(!1),V()}).catch(R=>{console.log("error: ",R),F(!1),me({toast:G,message:"Unable to save photo. Please, try later"})})):me({toast:G,message:"Please Choose the picture."})};return e.createElement(e.Fragment,null,e.createElement(f,{position:"absolute",left:"10px",top:"20px",spacing:"2"},e.createElement(ee,{position:"relative",top:"0",left:"0",as:Ne,boxSize:6}),e.createElement(E,{fontSize:"20px"},"Profile Picture")),e.createElement(p,{w:"full",pt:"32px",spacing:"2"},e.createElement(T,{p:"8"},e.createElement(U,{h:"180px",w:"180px",borderRadius:"1000px",bg:"autoBlue.400",position:"relative",overflow:"hidden"},e.createElement(tt,{imageUrl:c,zoom:t,onZoomChange:Ee,onCropComplete:de}))),g?e.createElement(e.Fragment,null,e.createElement(m,{fontSize:"16px"},"Scale and Crop"),e.createElement(rt,{min:1,max:3,step:.1,value:t,onChange:a})):e.createElement(at,{setFilePath:o,setFile:n,acceptedFileTypes:"image/*",setIsEditing:h}),e.createElement(f,{w:"full",pt:"24px"},e.createElement(te,{bg:"autoGrey.400",color:"black",_active:{bg:"autoGrey.600"},onClick:V},"Cancel"),e.createElement(te,{isLoading:fe,onClick:()=>{g?ge():he()}},g?"Crop":"Save"))))},ot=({})=>{const{isChangeProfilePictureOpen:t,screen:a}=b(n=>n.globalAppState),{isDesktop:r}=a,l=j(),s=()=>l(ae());return e.createElement(e.Fragment,null,r?e.createElement(je,{isOpen:t,onClose:s,isCentered:!0,blockScrollOnMount:!0},e.createElement(re,null),e.createElement(Pe,{p:"32px 48px",w:"450px"},e.createElement(ee,{top:"30px",right:"48px"}),e.createElement(ue,null),e.createElement(le,{p:"0"}))):e.createElement(Ie,{isOpen:t,placement:"bottom",onClose:s,size:"full"},e.createElement(re,null),e.createElement(Ae,{maxH:"100%"},e.createElement(le,null,e.createElement(T,{h:"full"},e.createElement(p,{w:"full"},e.createElement(ue,null)))))))},ct=({})=>{const[t,a]=i.exports.useState(""),{path:r}=D(),l=j(),{avatar:s,fullName:n,phone:c}=b(o=>o.userInfoSlice);return i.exports.useEffect(()=>{s&&a(s)},[s]),e.createElement(I,{bg:"white",p:"0",w:["full",null,null,"200px"],maxH:"400px"},e.createElement(U,{p:"32px"},e.createElement(_e,{username:n,image:t,secondaryText:`+995 ${c}`,size:"70px",showPhotoChange:!0})),e.createElement(ot,null),e.createElement(p,{pb:"24px",spacing:"0"},e.createElement(H,{to:`${r}/order-list`},"Order List"),e.createElement(H,{to:`${r}/favourites`},"Favourites"),e.createElement(H,{to:"/home",clickCallback:()=>l(Oe())},"Log out")))},it=({car:t})=>{const a=W();return e.createElement(I,{bg:"autoGrey.500",w:"full",p:"0",cursor:"pointer",onClick:()=>a.push(`/catalog/car/${t.id}`)},e.createElement(f,{w:"full",justify:"space-between",p:"16px",align:"stretch"},e.createElement(f,{spacing:"4",minW:"220px",p:"0"},e.createElement(L,{ratio:78/66,minW:"78px"},e.createElement(z,{src:t==null?void 0:t.imgUrls[0],borderRadius:"8px",fallbackSrc:"https://via.placeholder.com/150"})),e.createElement(p,{align:"flex-start"},e.createElement(d,null,"Name"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.m?P(t.m):e.createElement(u,null)," ",t.mG?P(t.mG):e.createElement(u,{pl:"2",children:""})))),e.createElement(p,{align:"flex-start",w:"full",maxW:"80px",pt:"2"},e.createElement(d,null,"Year"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.y||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(d,null,"Damage"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.dmg?e.createElement(e.Fragment,null,P(t.dmg)):e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(d,null,"Location"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.lC||e.createElement(u,null))),e.createElement(p,{align:"flex-start",w:"full",pt:"2"},e.createElement(d,null,"Engine"),e.createElement(m,{fontSize:"16px",fontWeight:"500"},t.eng||e.createElement(u,null))),e.createElement(Ye,{carId:t.id,h:"46px",w:"45px"})))},mt=({})=>{const{favouriteCars:t}=b(r=>r.userInfoSlice),{favouriteCarsFetching:a}=b(r=>r.userInfoSlice);return e.createElement(I,{w:"full",p:"32px"},e.createElement(p,{w:"full",spacing:"4"},a?e.createElement(T,{w:"full",h:"300px"},e.createElement(N,null)):t.length?t.map(r=>e.createElement(it,{key:r.id,car:r})):e.createElement(E,null,"Your Favourites list is empty")))},ut=({car:t})=>{const a=t.imgUrls,r=W();return e.createElement(I,{w:"full",p:"4",onClick:()=>r.push(`/catalog/car/${t.id}`)},e.createElement(p,{spacing:"4"},e.createElement(Ve,{model:`${t.m} ${t.mG}`,id:t.id,year:Number(t.y)}),e.createElement(Ze,{gridTemplateAreas:'"a a b" "a a c"',w:"full",maxH:"130px",gap:"2"},e.createElement(L,{overflow:"hidden",borderRadius:"8px",ratio:191/130,w:"full",gridArea:"a",maxH:"130px"},e.createElement(z,{src:a[0]?a[0]:void 0,fallbackSrc:B,borderRadius:"8px"})),e.createElement(L,{ratio:191/130,w:"full",gridArea:"b",maxH:"61px"},e.createElement(z,{src:a[1]?a[1]:void 0,fallbackSrc:B,borderRadius:"8px"})),e.createElement(L,{ratio:191/130,w:"full",gridArea:"c",maxH:"61px"},e.createElement(z,{src:a[2]?a[2]:void 0,fallbackSrc:B,borderRadius:"8px"}))),e.createElement(p,{divider:e.createElement(ze,null),w:"full"},e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Damage"),e.createElement(E,null,t.dmg?qe(t.dmg):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Mileage"),e.createElement(E,null,t.od?oe(t.od):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Location"),e.createElement(E,null,t.lC?P(t.lC):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Engine"),e.createElement(E,null,t.eng?P(t.eng.toString()):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Esimate Price"),e.createElement(E,null,t.price?e.createElement(e.Fragment,null,"$ ",oe(t.price)):e.createElement(u,null))),e.createElement(f,{w:"full",justify:"space-between"},e.createElement(d,null,"Total Price"),e.createElement(E,null,"$20 000")))))},pt=({})=>{const{favouriteCars:t}=b(a=>a.userInfoSlice);return e.createElement(Ke,{pt:"48px"},t.map(a=>e.createElement(ut,{key:a.id,car:a})))},ft=({})=>{const{isDesktop:t}=ne(),a=j();return i.exports.useEffect(()=>{a(Le("")),a(Fe(""))},[]),e.createElement(e.Fragment,null,t?e.createElement(mt,null):e.createElement(pt,null))},Et=({})=>e.createElement(ft,null),dt=({orderList:t})=>{const[a,r]=i.exports.useState([]),l=b(c=>c.orderedCars.fetching),s=_(),n=c=>{a.includes(c)?r(a.filter(o=>o!==c)):r(a.concat(c))};return e.createElement(I,{p:"32px",w:"full"},l?e.createElement(T,{w:"full",h:"full"},e.createElement(N,null)):t.length?e.createElement(Qe,null,e.createElement(Xe,null,e.createElement(ie,{opacity:"0.5",fontSize:"14px",fontWeight:"light"},e.createElement(v,{p:[null,null,null,"2","4"],isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Order Id")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Name")),e.createElement(v,{fontWeight:"light",px:"2"},e.createElement(m,{textTransform:"capitalize"},"Created")),e.createElement(v,{isTruncated:!0,fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Delivery Date")),e.createElement(v,{fontWeight:"light",p:[null,null,null,"2","4"]},e.createElement(m,{textTransform:"capitalize"},"Location")),e.createElement(v,{isTruncated:!0,p:"4",fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Total Price")),e.createElement(v,{fontWeight:"light"},e.createElement(m,{textTransform:"capitalize"},"Status")),e.createElement(v,{fontWeight:"light"}))),e.createElement(et,null,t.map((c,o)=>e.createElement(ie,{key:o,pt:"50px",_hover:{bg:"autoGrey.100"}},e.createElement(C,{w:"full",px:"4",title:c.id,py:[null,null,"8","8",""]},e.createElement(E,{w:"80px",isTruncated:!0,cursor:"pointer",onClick:()=>navigator.clipboard.writeText(c.id).then(()=>s({title:"Id copied to the clipboard",status:"success",position:"top"}))},c.id)),e.createElement(C,{title:c.carName,px:""},e.createElement(m,{noOfLines:a.includes(o)?10:1,fontSize:"16px",w:"100px"},c.carName)),e.createElement(C,{px:"2"},c.createdAt?ce(c.createdAt.toString()):e.createElement(u,null)),e.createElement(C,null,c.deliveryAt?ce(c.deliveryAt.toString()):e.createElement(u,null)," "),e.createElement(C,{p:[null,null,null,"2","4"]},c.location," "),e.createElement(C,{px:"4",title:`$ ${c.price}`},e.createElement(m,{fontSize:"inherit",maxW:"80px",isTruncated:!0},"$ ",c.price*1)),e.createElement(C,null,e.createElement(m,{whiteSpace:"nowrap"},c.status)," "),e.createElement(C,{p:"0"},e.createElement(X,{variant:"link",minH:"50px",onClick:()=>n(o)},e.createElement(Re,{transform:a.includes(o)?"rotate(180deg)":"none",transition:"all .2s"}))))))):e.createElement(T,null,e.createElement(E,null,"Your order list is empty")))},gt=({orderList:t})=>{const a=b(r=>r.orderedCars.fetching);return e.createElement(p,{w:"full",spacing:"24px",pt:"48px"},a?e.createElement(T,null,e.createElement(N,null)):t.length?t.map((r,l)=>e.createElement(Je,{key:l,order:r})):e.createElement(E,null,"Your order list is empty"))},ht=({})=>{const[t,a]=i.exports.useState([]),{isDesktop:r}=ne(),l=b(c=>c.userInfoSlice.id),s=_(),n=j();return i.exports.useEffect(()=>{l&&n(We(l)).unwrap().then(c=>a(c)).catch(c=>s({title:c,status:"error",position:"top"}))},[l]),e.createElement(e.Fragment,null,r?e.createElement(dt,{orderList:t}):e.createElement(gt,{orderList:t}))},Nt=()=>{const{path:t}=D();return e.createElement(De,{pt:["16px","26px","32px","48px"]},e.createElement(Ue,null),e.createElement(Me,{direction:["column",null,null,"row"],spacing:"24px",w:"full"},e.createElement(ct,null),e.createElement(be,null,e.createElement(M,{exact:!0,path:t,render:()=>e.createElement(we,{to:`${t}/order-list`})}),e.createElement(M,{exact:!0,path:`${t}/order-list`,render:()=>e.createElement(ht,null)}),e.createElement(M,{exact:!0,path:`${t}/favourites`,render:()=>e.createElement(Et,null)}))))};export{Nt as UserProfilePage,Nt as default};
