(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"AdminPage",(function(){return P})),n.d(r,"DealerDashboard",(function(){return E})),n.d(r,"Home",(function(){return R})),n.d(r,"Login",(function(){return Q})),n.d(r,"CatalogPage",(function(){return X}));var a,c=n(0),i=n(53),o=n.n(i),s=n(15),l=n(10),u=n(51),d=function(){return Object(u.b)()},j=u.c;!function(e){e.ADMIN="admin",e.DEALER="dealer"}(a||(a={}));var b=[{roles:[],view:"Home",path:"/home",isPrivate:!1,exact:!0},{roles:[a.ADMIN],view:"AdminPage",path:"/admin/dashboard",isPrivate:!0,exact:!0},{roles:[a.DEALER],view:"DealerDashboard",path:"/dealer/dashboard",isPrivate:!0,exact:!0},{roles:[],view:"Login",path:"/login",isPrivate:!1,isAuth:!0,exact:!0},{roles:[],view:"CatalogPage",exact:!0,isPrivate:!1,isAuth:!1,path:"/catalog"}],h=n(160),O=n(42),p=n.n(O),x=n(68),f=n(41),g=n(96),m=n.n(g).a.create({withCredentials:!0}),v={autoLogin:function(){return m.get("/api/me").then((function(e){return e.data})).catch((function(e){throw e}))}},w=Object(f.b)("auth/login",function(){var e=Object(x.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,m.post("/api/login",t,{withCredentials:!0});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0.response){e.next=15;break}return console.log(e.t0.response),e.abrupt("return",r(e.t0.response.data.error));case 15:return e.abrupt("return",r(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(f.b)("auth/logout",function(){var e=Object(x.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,console.log("pressed logout"),e.prev=2,e.next=5,m.get("/api/logout");case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),!e.t0.response){e.next=14;break}return console.log(e.t0.response),e.abrupt("return",r(e.t0.response));case 14:return e.abrupt("return",r(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(f.b)("auth/autoLogin",Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.autoLogin();case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))),C=Object(f.c)({name:"auth",initialState:{loading:!1,error:null,role:null,isAuthenticated:!1,username:""},reducers:{},extraReducers:function(e){e.addCase(w.pending,(function(e,t){e.loading=!0})),e.addCase(w.fulfilled,(function(e,t){localStorage.setItem("USER_ROLE",t.payload.role),e.role=t.payload.role,e.loading=!1,e.isAuthenticated=!0})),e.addCase(w.rejected,(function(e,t){e.error=String(t.payload),e.loading=!1,e.isAuthenticated=!1})),e.addCase(A.fulfilled,(function(e,t){console.log("logout fullfilled"),localStorage.removeItem("USER_ROLE"),e.role=null,e.isAuthenticated=!1})),e.addCase(A.rejected,(function(e,t){e.error=String(t.payload),e.isAuthenticated=!0})),e.addCase(y.pending,(function(e){e.loading=!0})),e.addCase(y.fulfilled,(function(e,t){e.loading=!1,e.isAuthenticated=t.payload.isAuthenticated,e.role=t.payload.role,e.username=t.payload.username})),e.addCase(y.rejected,(function(e){e.isAuthenticated=!1}))}}).reducer,L=n(2),P=function(){var e=d(),t=Object(l.g)();return Object(L.jsxs)("div",{children:[Object(L.jsx)(h.a,{onClick:function(){e(A()).then((function(){return t.push("/login")}))},children:"logout"}),Object(L.jsx)(h.a,{onClick:function(){m.get("/api/me").then((function(e){return console.log(e)}))},children:"Me"}),Object(L.jsx)("h1",{style:{textAlign:"center"},children:"Admin page"})]})},E=function(){return Object(L.jsx)("h1",{children:"Dealer dashboard"})},R=function(){return Object(L.jsxs)("div",{children:[Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:Object(L.jsx)(s.b,{to:"/admin/dashboard/",children:"admin page"})}),Object(L.jsx)("li",{children:Object(L.jsx)(s.b,{to:"/login",children:"Login"})})]}),Object(L.jsx)("h1",{children:"HomePage"})]})},k=n(158),D=n(14),S=n(28),I=n(152),H=function(e){var t=e.variant,n=e.children,r=Object(S.a)(e,["variant","children"]);return Object(L.jsx)(I.a,Object(D.a)(Object(D.a)({maxW:"regular"===t?"700px":"400px"},r),{},{children:n}))},M=n(155),U=n(161),V=n(156),W=n(157),z=n(5),J=n(37),N=n(154),_=n(162),B=n(163),F=n(50),q=function(e){var t=e.label,n=(e.size,Object(S.a)(e,["label","size"])),r=Object(F.c)(n),a=Object(z.a)(r,2),c=a[0],i=a[1].error;return Object(L.jsxs)(J.a,{isInvalid:!!i,children:[Object(L.jsx)(N.a,{htmlFor:c.name,children:t}),Object(L.jsx)(_.a,Object(D.a)(Object(D.a)({},c),n)),i?Object(L.jsx)(B.a,{children:i}):null]})},G=function(){var e=d();return Object(L.jsx)(F.b,{initialValues:{username:"",password:""},onSubmit:function(t){var n={username:t.username,password:t.password};e(w(n))},children:function(){return Object(L.jsxs)(F.a,{children:[Object(L.jsx)(M.a,{w:"full",textAlign:"center",mb:4,children:"Login"}),Object(L.jsxs)(U.a,{spacing:4,children:[Object(L.jsx)(q,{name:"username",label:"Username",placeholder:"username"}),Object(L.jsx)(q,{name:"password",label:"Password",placeholder:"password",type:"password"}),Object(L.jsx)(h.a,{variant:"solid",w:"full",colorScheme:"blue",type:"submit",children:"Login"}),Object(L.jsxs)(V.a,{color:"gray.500",as:"sub",children:[Object(L.jsx)(W.a,{children:"if you aren't car dealer or an admin go to "}),Object(L.jsx)(W.a,{color:"blue.500",as:"u",pl:1,children:Object(L.jsx)(s.b,{to:"/home",children:"Home"})})]})]})]})}})},K=function(){return Object(L.jsx)(k.a,{h:"100vh",children:Object(L.jsx)(H,{variant:"small",children:Object(L.jsx)(G,{})})})},Q=function(){return Object(L.jsx)(K,{})},T=function(){return Object(L.jsx)("div",{children:"Catalog"})},X=function(){return Object(L.jsx)(T,{})},Y=function(e){var t=e.component,n=Object(S.a)(e,["component"]),r=j((function(e){return e.authReducer})).isAuthenticated;return Object(L.jsx)(l.b,Object(D.a)(Object(D.a)({},n),{},{children:r?Object(L.jsx)(t,{}):Object(L.jsx)(l.a,{to:"/login"})}))},Z=function(e){var t=e.component,n=Object(S.a)(e,["component"]),r=j((function(e){return e.authReducer})),a=r.isAuthenticated,c=r.role;return Object(L.jsx)(l.b,Object(D.a)(Object(D.a)({},n),{},{children:a?Object(L.jsx)(l.a,{to:"/".concat(c,"/dashboard")}):Object(L.jsx)(t,{})}))},$=function(e){var t=e.component,n=Object(S.a)(e,["component"]);return Object(L.jsx)(l.b,Object(D.a)(Object(D.a)({},n),{},{children:Object(L.jsx)(t,{})}))},ee=(n(138),function(){return Object(L.jsxs)("div",{children:[Object(L.jsxs)("ul",{children:[Object(L.jsx)("li",{children:Object(L.jsx)(s.b,{to:"/home",children:"Home"})}),Object(L.jsx)("li",{children:Object(L.jsx)(s.b,{to:"/login",children:"Login"})})]}),Object(L.jsx)("h1",{style:{color:"red"},children:"Error page"})]})});var te=function(){var e=j((function(e){return e.authReducer})),t=e.role,n=e.loading,a=d();return Object(c.useEffect)((function(){a(y())}),[a]),n?Object(L.jsx)("h1",{children:"...loading"}):Object(L.jsx)(s.a,{children:Object(L.jsxs)(l.d,{children:[Object(L.jsx)(l.b,{path:"/",exact:!0,children:Object(L.jsx)(l.a,{to:"/home"})}),b.filter((function(e){var n=e.roles;return!!(n&&0===n.length||t&&n.includes(t))})).map((function(e){var t=e.path,n=e.view,a=e.isPrivate,c=e.exact,i=e.isAuth,o=r[n];return a?Object(L.jsx)(Y,{path:t,component:o,exact:c},t):i?Object(L.jsx)(Z,{path:t,component:o,exact:c},t):Object(L.jsx)($,{path:t,component:o,exact:c},t)})),Object(L.jsx)(l.b,{children:Object(L.jsx)(ee,{})})]})})},ne={authReducer:C},re=Object(f.a)({reducer:ne}),ae=n(159);o.a.render(Object(L.jsx)(u.a,{store:re,children:Object(L.jsx)(ae.a,{children:Object(L.jsx)(te,{})})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.476425de.chunk.js.map